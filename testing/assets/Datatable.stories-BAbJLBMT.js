import{j as A}from"./jsx-runtime-Cw0GR0a5.js";import{r as e}from"./index-CTjT7uj6.js";import{a as t}from"./chunk-454WOBUV-DWuJqIWT.js";import{M as z,a as c}from"./ipAssets-Cyv8vW9V.js";import{s as B}from"./columns-CMOcvf2c.js";import{c as N}from"./docs-CvwVg-te.js";import{f as E}from"./options-CwPWwUj4.js";import{b as x,d as V}from"./actions-CSnHhUwL.js";import{a as _,d as j}from"./defaultConfigs-BU_QJpC1.js";import{D as T}from"./Datatable-6kaCnrez.js";import{M}from"./react-router-dom-BO_MR9e_.js";import"./v4-D8aEg3BZ.js";import"./Text-CQej7zPl.js";import"./space-BY85GhUc.js";import"./index-BRV0Se7Z.js";import"./index-C7IrpltL.js";import"./Tooltip-Dgp4eCqw.js";import"./DSProvider-eD554_K8.js";import"./extends-CF3RwP-h.js";import"./index-DIVhMF2i.js";import"./theme-DztFT9GZ.js";import"./colors-DAn332pn.js";import"./Surface-CvF-S7pg.js";import"./flex.types-BrkCVx66.js";import"./useLogger-CziYgifR.js";import"./prop-Cw0eZkJ_.js";import"./Padbox-CsIyVOa3.js";import"./Stack-vWwwEz_d.js";import"./Inline-CNottUT6.js";import"./Cluster-BOKWm1iB.js";import"./FloatingContext-CTHtuARV.js";import"./toPairs-D7rCSHJa.js";import"./Filters-CFnOTFBy.js";import"./Icon-DSPfH_8v.js";import"./index-DFvsTZbx.js";import"./Spinner-b5BYo8Sk.js";import"./Message-DUxshZZl.js";import"./Paragraph-DLn62-bA.js";import"./spacing.types-C9Yu1wmA.js";import"./Checkbox-CKFjIkBH.js";import"./check-DkA7BUy7.js";import"./minus-DR9WSvoQ.js";import"./Label-BXbsNi4R.js";import"./Input-BtOZIwxI.js";import"./MultiValueInput-D7lNkhxc.js";import"./index-Bl_jQQ83.js";import"./Pill-Dq2X2jGR.js";import"./PillRemoveButton-D2CC_PxY.js";import"./PillLabel-yycd7XxX.js";import"./gt-bFkVvxSK.js";import"./isNonEmptyArray-CPhLVV4V.js";import"./isNotEmpty-DmRwknIn.js";import"./isArray-B7wtxCYk.js";import"./isFunction-DKkHXutz.js";import"./pluck-CGJirjHu.js";import"./both-CLVeTvyf.js";import"./isEmptyArray-Ckn0nrLG.js";import"./noop-CRTpovv1.js";import"./isNonEmptyString-B_Cuyr9S.js";import"./isNotNull-D2Wrs3cn.js";import"./trim-6_CYq9V8.js";import"./take-ZeMSspOg.js";import"./Password-65KzSUZy.js";import"./Radio-YCSNiGxy.js";import"./Select-Dx3xIfX3.js";import"./unsupportedIterableToArray-xuqNRLo1.js";import"./setPrototypeOf-DgZC2w_0.js";import"./action.types-CSW_hKjS.js";import"./Button.enums-P6KVfN9D.js";import"./BaseButton-Bl-0NeNF.js";import"./require-router-link-EREg1Bbm.js";import"./Button-CgUf0TwU.js";import"./pick-DB5feQ9Q.js";import"./isNotNilOrEmpty-BG4ifY0O.js";import"./isNilOrEmpty-4-uKJ3Xu.js";import"./isNil-BfRYDDcR.js";import"./sortBy-DcYbM6i8.js";import"./CreatableSelect-Ciqv7Eeg.js";import"./Range-cNWnBLi8.js";import"./Switch-0dtb0Z-n.js";import"./subtract-C6lrP-Nx.js";import"./TextArea-DbKusWUV.js";import"./mergeRefs-BUQjZHg5.js";import"./SearchBar-Dg-JDwAb.js";import"./SegmentedToggleItem-B_FdIjKO.js";import"./BaseTabLabel-CA2UX4fK.js";import"./InputGroup-Ci-Ppccm.js";import"./BaseDateRangePicker-Dcuc3RED.js";import"./SingleDatePicker-CtcVwD1S.js";import"./isNativeReflectConstruct-lfp1ZYuW.js";import"./usePopper-B6Vq3Q19.js";import"./propEq-CyrJNrjT.js";import"./head-G8u9AJFU.js";import"./defaultTo-CWH4ecPB.js";import"./BottomBar-BgJEl900.js";import"./all-Ds4b8lE9.js";import"./when-DJfveLYW.js";import"./Heading-5wHX6smU.js";import"./BaseTable.types-cuKXYoMJ.js";import"./BaseTable.styles-D9Tmu-Wz.js";import"./BaseLink-C32xmWCG.js";import"./flip-Dpb57Bs1.js";import"./DropdownMenu-D0YxwLyR.js";import"./Dropdown-D5JdNZs1.js";import"./ControlledDropdown-Dffl62Db.js";import"./useOuterCallback-Mi4Xn43N.js";import"./inheritsLoose-B6jfs0L0.js";import"./DropdownMenu.types-C8FvQJhf.js";import"./ellipsisH-CxP8BjCT.js";import"./Footer-B0SdiLAt.js";import"./Datatable.store-D58zn130.js";import"./BatchActions-CQRUh8gW.js";import"./ControlsModule-CEoE7-G2.js";import"./ColumnsControls-DwB4IWhB.js";import"./ControlDropdown-CVt3t3KM.js";import"./CloseButton-B_hKnNOh.js";import"./SortableList-Z9_zq4x7.js";import"./sortable.esm-CWiKwvcN.js";import"./modifiers.esm-D9Gd6yO_.js";import"./lt-ilvgIYX1.js";import"./ControlButton-De35MTEo.js";import"./Badge-5a5CaZPv.js";import"./omit-CNqWPtMx.js";import"./zipObj-C9fmdzRH.js";import"./BatchModule-BMPKr54p.js";import"./ElementCounter-By-pUbVN.js";import"./Table-MKSRqKtA.js";import"./index-DarwbsO9.js";import"./F-DymNqVSm.js";import"./useColumnsControls-DyEKFv-h.js";import"./useLocalStorageState-CgPcEN2x.js";import"./tiny-invariant-CopsF_GD.js";const J={fields:E,onApply:t("onFiltersApply"),onChange:t("onFiltersChange"),onClose:t("onFiltersClose")},D={filteringConfig:J,searchConfig:{onSearch:t("onSearch"),onClear:t("onClear")},onColumnVisibilityChange:t("columnVisibilityChange")},q=`{
  Header: string;
  cellType?: CellTypes;
  cellLinkComponent?: ReactComponentLike;
  cellOnClick?: (value: CellValue, rowData: D) => void;
  cellHrefComposer?: (value: CellValue, rowData: D) => string;
  cellToComposer?: (value: CellValue, rowData: D) => To;
  cellFormatter?: (value: CellValue, rowData: D) => string;
  cellTooltipPopupComposer?: (value: CellValue, rowData: D) => JSX.Element;
  nullCondition?: (value: CellValue) => boolean;
  nullConditionValue?: string;
  multiValueDisplayLimit?: number;
  headerTooltip?: JSX.Element;

  ...rest of Column options from 'react-table'
}`,H=`| string
| (originalRow: D, relativeIndex: number, parent?: Row<D>) => string`,X=`| HandlerActionKind
| AbsoluteLinkActionKind
| RelativeLinkActionKind
| ActionWithSubactions
`,W=`{
  hasSelection: boolean;
  onSelect: (
    ids: IdType<D>[],
    hasExclusiveSelection: boolean,
  ) => void;
  defaultSelectedRowIds: IdType<D>[];
  hasPagination: boolean;
  hasServerSidePagination: boolean;
  defaultPageSize: number;
  hasSorting: boolean;
  hasServerSideSorting: boolean;
  defaultSortBy: {
    id: IdType<D>;
    desc?: boolean;
  }[];
  rowActions: RowAction<D>[];
  NoMatchingDataComponent: ReactComponentLike;
  NoDataComponent: ReactComponentLike;
}`,Z=`{
  hasSearch: boolean;
  searchConfig: Partial<SearchBarProps>;
  hasFiltering: boolean;
  filteringConfig: Partial<FiltersProps>;
  defaultIsFilteringOpen: boolean;
  defaultIsFilteringApplied: boolean;
  onControlToggle: (control: Controls, isActive: boolean) => void;
}`,$=`({
  pageSize: number;
  pageIndex: number;
  sortBy: SortingRule<D>[];
  filters: Filter[];
  query: string;
}) => void;`;z.set("2021-03-31T00:00:00Z");const De={title:"components/Datatable",component:T,parameters:{screenshot:{skip:!0},docs:{source:{type:"code"},description:{component:`
\`\`\`jsx
import { Datatable } from '@securityscorecard/design-system';

const MyFancyDatatable = () => <Datatable ...props />
\`\`\`

  ${N}
      `}}},decorators:[s=>A.jsx(M,{children:s()})],argTypes:{data:{control:{disable:!0}},dataSize:{control:{disable:!0}},columns:{control:{disable:!0},table:{type:{summary:"Columns<D>[]",detail:q}}},isDataLoading:{control:{disable:!0}},pageButtonsCount:{control:{disable:!1},defaultValue:5},dataPrimaryKey:{table:{type:{summary:"PrimaryKey<D>",detail:H}}},batchActions:{table:{type:{summary:"Action[]",detail:X}}},controlsConfig:{table:{type:{summary:"Partial<ControlsConfig>",detail:Z},defaultValue:{summary:"defaultControlsConfig",detail:JSON.stringify(_,null,2)}}},tableConfig:{table:{type:{summary:"Partial<TableConfig<D>>",detail:W},defaultValue:{summary:"defaultTableConfig",detail:JSON.stringify(j,null,2)}}},onDataFetch:{control:{disable:!0},table:{type:{summary:"OnDataFetchFn<D>",detail:$},defaultValue:{summary:"noop"}}}}},r=s=>{const[m,l]=e.useState([]),[g,a]=e.useState(!0),[u,f]=e.useState(0),p=e.useRef(),n=e.useCallback(({pageSize:S,pageIndex:P})=>{t("onDataFetch")({pageSize:S,pageIndex:P}),a(!0),p.current=setTimeout(()=>{const w=S*P,O=w+S,k=c.slice(w,O);l(k),f(c.length),a(!1)},500)},[a,l]);e.useEffect(()=>{n({pageSize:50,pageIndex:0})},[n]);const{batchActions:C=[],controlsConfig:d={},dataPrimaryKey:h,tableConfig:o={},...y}=s,b=()=>{clearTimeout(p.current),a(!1)};return A.jsx(T,{...y,batchActions:[...C,...x],columns:B,controlsConfig:{...d,...D},data:m,dataPrimaryKey:h||"ipAddress",dataSize:u,isDataLoading:g,tableConfig:{...o,rowActions:[...(o==null?void 0:o.rowActions)||[],...V],onSelect:t("onRowSelect")},onCancelLoading:b,onDataFetch:n})};r.storyName="Playground (Server-Side implementation)";const i=s=>{const[m,l]=e.useState(c),g=e.useRef(null),a=o=>{g.current=o},u=o=>{t("onSearch")(o);const y=c.filter(b=>b.ipAddress.includes(o));l(y)},f=()=>{t("onClear")(),l(c)},{batchActions:p=[],controlsConfig:n={},dataPrimaryKey:C,tableConfig:d={},...h}=s;return A.jsx(T,{...h,batchActions:[...p,...x],columns:B,controlsConfig:{...D,...n,searchConfig:{...D.searchConfig,...n.searchConfig,onSearch:u,onClear:f}},data:m,dataPrimaryKey:C||"ipAddress",dataSize:m.length,resetSelectionFn:a,tableConfig:{...d,rowActions:[...d.rowActions||[],...V],onSelect:t("onRowSelect"),hasServerSidePagination:!1,hasServerSideSorting:!1}})};i.storyName="Playground (In-Browser implementation)";r.__docgenInfo={description:"",methods:[],displayName:"ServerSidePlayground"};i.__docgenInfo={description:"",methods:[],displayName:"InBrowserPlayground"};var R,F,L;r.parameters={...r.parameters,docs:{...(R=r.parameters)==null?void 0:R.docs,source:{originalSource:`args => {
  const [tableData, setTableData] = useState<Data[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [totalLength, setTotalLength] = useState(0);
  const timeoutRef = useRef<NodeJS.Timeout | undefined>();
  const dispatchFetchData = useCallback(({
    pageSize,
    pageIndex
  }) => {
    action('onDataFetch')({
      pageSize,
      pageIndex
    });
    setIsLoading(true);
    timeoutRef.current = setTimeout(() => {
      const startRow = pageSize * pageIndex;
      const endRow = startRow + pageSize;
      const fetchedData: Data[] = assets.slice(startRow, endRow);
      setTableData(fetchedData);
      setTotalLength(assets.length);
      setIsLoading(false);
    }, 500);
  }, [setIsLoading, setTableData]);
  useEffect(() => {
    dispatchFetchData({
      pageSize: 50,
      pageIndex: 0
    });
  }, [dispatchFetchData]);
  const {
    batchActions: argsBatchActions = [],
    controlsConfig: argsControlsConfig = {},
    dataPrimaryKey: argsDataPrimaryKey,
    tableConfig: argsTableConfig = {},
    ...restArgs
  } = args;
  const onCancelLoading = () => {
    clearTimeout(timeoutRef.current);
    setIsLoading(false);
  };
  return <Datatable<Data> {...restArgs} batchActions={[...argsBatchActions, ...datatableBatchActions]} columns={simpleColumns} controlsConfig={{
    ...argsControlsConfig,
    ...controlsConfig
  }} data={tableData} dataPrimaryKey={argsDataPrimaryKey || 'ipAddress'} dataSize={totalLength} isDataLoading={isLoading} tableConfig={{
    ...argsTableConfig,
    rowActions: [...(argsTableConfig?.rowActions || []), ...datatableRowActions],
    onSelect: action('onRowSelect')
  }} onCancelLoading={onCancelLoading} onDataFetch={dispatchFetchData} />;
}`,...(L=(F=r.parameters)==null?void 0:F.docs)==null?void 0:L.source}}};var v,I,K;i.parameters={...i.parameters,docs:{...(v=i.parameters)==null?void 0:v.docs,source:{originalSource:`args => {
  const [data, setData] = useState(assets);
  const resetFilter = useRef(null);
  const storeResetFn = resetFn => {
    resetFilter.current = resetFn;
  };
  const handleOnSearch = query => {
    action('onSearch')(query);
    const result = assets.filter(asset => asset.ipAddress.includes(query));
    setData(result);
  };
  const handleOnClearSearch = () => {
    action('onClear')();
    setData(assets);
  };
  const {
    batchActions: argsBatchActions = [],
    controlsConfig: argsControlsConfig = {},
    dataPrimaryKey: argsDataPrimaryKey,
    tableConfig: argsTableConfig = {},
    ...restArgs
  } = args;
  return <Datatable<Data> {...restArgs} batchActions={[...argsBatchActions, ...datatableBatchActions]} columns={simpleColumns} controlsConfig={{
    ...controlsConfig,
    ...argsControlsConfig,
    searchConfig: {
      ...controlsConfig.searchConfig,
      ...argsControlsConfig.searchConfig,
      onSearch: handleOnSearch,
      onClear: handleOnClearSearch
    }
  }} data={data} dataPrimaryKey={argsDataPrimaryKey || 'ipAddress'} dataSize={data.length} resetSelectionFn={storeResetFn} tableConfig={{
    ...argsTableConfig,
    rowActions: [...(argsTableConfig.rowActions || []), ...datatableRowActions],
    onSelect: action('onRowSelect'),
    hasServerSidePagination: false,
    hasServerSideSorting: false
  }} />;
}`,...(K=(I=i.parameters)==null?void 0:I.docs)==null?void 0:K.source}}};const Ae=["ServerSidePlayground","InBrowserPlayground"];export{i as InBrowserPlayground,r as ServerSidePlayground,Ae as __namedExportsOrder,De as default};
