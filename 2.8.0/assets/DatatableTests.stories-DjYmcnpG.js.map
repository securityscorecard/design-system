{"version":3,"file":"DatatableTests.stories-DjYmcnpG.js","sources":["../../../src/components/Datatable/DatatableTests.stories.tsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { Meta, StoryFn } from '@storybook/react';\nimport { MemoryRouter } from 'react-router-dom';\nimport MockDate from 'mockdate';\n\nimport Datatable from './Datatable';\nimport {\n  fields as filtersFields,\n  state as filtersState,\n} from '../Filters/mocks/options';\nimport { Data } from '../_internal/BaseTable/mocks/types';\nimport assets from '../_internal/BaseTable/mocks/ipAssets.json';\nimport { simpleColumns } from '../_internal/BaseTable/mocks/columns';\nimport { DatatableProps } from './Datatable.types';\nimport { DatatableStore, datatableInitialState } from './Datatable.store';\nimport { tableActionsMock } from './mocks/actions';\nimport { Text } from '../Text';\nimport { Stack } from '../layout';\n\nMockDate.set('2021-03-31T00:00:00Z');\n\nexport default {\n  title: 'components/Datatable/internalComponents/Datatable',\n  component: Datatable,\n  parameters: {\n    viewMode: 'story',\n    docs: { disable: true },\n    previewTabs: { 'storybook/docs/panel': { hidden: true } },\n  },\n  decorators: [(storyFn) => <MemoryRouter>{storyFn()}</MemoryRouter>],\n} as Meta;\n\nconst DatatableTemplate: StoryFn<DatatableProps<Data>> = (args) => (\n  <Datatable<Data> {...args} />\n);\n\nexport const MinimalConfig = DatatableTemplate.bind({});\nMinimalConfig.args = {\n  data: assets.slice(0, 5),\n  columns: simpleColumns,\n  dataSize: assets.length,\n  controlsConfig: {\n    filteringConfig: {\n      fields: filtersFields,\n    },\n  },\n};\n\nexport const WithDisabledSelection = DatatableTemplate.bind({});\nWithDisabledSelection.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    hasSelection: false,\n  },\n};\n\nexport const WithSelectedRows = DatatableTemplate.bind({});\nWithSelectedRows.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    defaultSelectedRowIds: [1, 3],\n  },\n};\n\nexport const WithSelectedRowsAndExclusionLogic = DatatableTemplate.bind({});\nWithSelectedRowsAndExclusionLogic.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    defaultSelectedRowIds: [1, 3],\n    hasOnlyPerPageSelection: false,\n  },\n};\n\nexport const WithSingleSelection = DatatableTemplate.bind({});\nWithSingleSelection.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    isMultiSelect: false,\n  },\n};\n\nexport const WithSingleSelectionAndSelectedRow = DatatableTemplate.bind({});\nWithSingleSelectionAndSelectedRow.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    isMultiSelect: false,\n    defaultSelectedRowIds: [1],\n  },\n};\n\nexport const WithNoData = DatatableTemplate.bind({});\nWithNoData.args = {\n  ...MinimalConfig.args,\n  data: [],\n  dataSize: 0,\n};\n\nexport const WithNoMatchingData: StoryFn<DatatableProps<Data>> = (args) => {\n  useEffect(() => {\n    DatatableStore.update((s) => {\n      s.hasAppliedFilters = true;\n    });\n\n    return () => {\n      DatatableStore.replace(datatableInitialState);\n    };\n  });\n\n  return <Datatable<Data> {...args} />;\n};\nWithNoMatchingData.args = {\n  ...WithNoData.args,\n  controlsConfig: {\n    ...WithNoData.args.controlsConfig,\n    defaultIsFilteringApplied: true,\n  },\n};\n\nexport const WithBatchActions = DatatableTemplate.bind({});\nWithBatchActions.args = {\n  ...MinimalConfig.args,\n  batchActions: tableActionsMock,\n};\n\nexport const WithDisabledBatchModule = DatatableTemplate.bind({});\nWithDisabledBatchModule.args = {\n  ...MinimalConfig.args,\n  isBatchModuleEnabled: false,\n};\n\nexport const WithDisabledControls = DatatableTemplate.bind({});\nWithDisabledControls.args = {\n  ...MinimalConfig.args,\n  isControlsEnabled: false,\n};\n\nexport const WithDisabledControlsAndActiveColumns = DatatableTemplate.bind({});\nWithDisabledControlsAndActiveColumns.args = {\n  ...MinimalConfig.args,\n  isControlsEnabled: false,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsOpen: true,\n  },\n};\n\nexport const WithDisabledControlsAndAppliedColumns = DatatableTemplate.bind({});\nWithDisabledControlsAndAppliedColumns.args = {\n  ...MinimalConfig.args,\n  isControlsEnabled: false,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsApplied: true,\n  },\n};\n\nexport const WithDisabledControlsAndColumns = DatatableTemplate.bind({});\nWithDisabledControlsAndColumns.args = {\n  ...MinimalConfig.args,\n  isControlsEnabled: false,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    hasColumnsControls: false,\n  },\n};\n\nexport const WithOpenFiltering = DatatableTemplate.bind({});\nWithOpenFiltering.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsFilteringOpen: true,\n  },\n};\n\nexport const WithAppliedFiltering = DatatableTemplate.bind({});\nWithAppliedFiltering.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsFilteringApplied: true,\n  },\n};\n\nexport const WithOpenAndAppliedFiltering = DatatableTemplate.bind({});\nWithOpenAndAppliedFiltering.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    defaultIsFilteringOpen: true,\n    filteringConfig: {\n      fields: filtersFields,\n      state: filtersState,\n    },\n  },\n};\n\nexport const WithDisabledFiltering = DatatableTemplate.bind({});\nWithDisabledFiltering.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    hasFiltering: false,\n  },\n};\n\nexport const WithOpenColumns = DatatableTemplate.bind({});\nWithOpenColumns.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsOpen: true,\n  },\n};\nWithOpenColumns.parameters = {\n  screenshot: {\n    delay: 1000,\n  },\n};\n\nexport const WithAppliedColumns = DatatableTemplate.bind({});\nWithAppliedColumns.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsApplied: true,\n  },\n};\n\nexport const WithOpenAndAppliedColumns = DatatableTemplate.bind({});\nWithOpenAndAppliedColumns.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsOpen: true,\n    defaultIsColumnsControlsApplied: true,\n  },\n};\nWithOpenAndAppliedColumns.parameters = {\n  screenshot: {\n    delay: 1000,\n  },\n};\n\nexport const WithDisabledColumns = DatatableTemplate.bind({});\nWithDisabledColumns.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    hasColumnsControls: false,\n  },\n};\n\nexport const WithCustomPlaceholderForSearch = DatatableTemplate.bind({});\nWithCustomPlaceholderForSearch.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    searchConfig: {\n      placeholder: 'Search by IP address',\n    },\n  },\n};\n\nexport const WithDisabledSearch = DatatableTemplate.bind({});\nWithDisabledSearch.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    hasSearch: false,\n  },\n};\n\nexport const WithSinglePage = DatatableTemplate.bind({});\nWithSinglePage.args = {\n  ...MinimalConfig.args,\n  dataSize: 50,\n};\n\nexport const WithAllColumnsHidden = DatatableTemplate.bind({});\nWithAllColumnsHidden.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsApplied: true,\n  },\n  tableConfig: {\n    defaultHiddenColumns: [\n      'status',\n      'detectionMethod',\n      'country',\n      'findingsCount',\n      'ipAddress',\n      'domainsCount',\n      'source',\n      'issuesCount',\n      'observationDate',\n      'lastObservationDate',\n      'observedFor',\n    ],\n  },\n};\n\nexport const WithPersistedState = DatatableTemplate.bind({});\nWithPersistedState.args = {\n  ...MinimalConfig.args,\n  id: 'persisted_state',\n};\nWithPersistedState.parameters = {\n  screenshot: { skip: true },\n};\nWithPersistedState.decorators = [\n  (storyFn) => (\n    <Stack gap=\"md\">\n      <Text>\n        An id must be provided to the Datatable in order to persists the table\n        configuration.\n      </Text>\n      {storyFn()}\n    </Stack>\n  ),\n];\n"],"names":["viewMode","disable","DatatableTests_stories","previewTabs","parameters","hidden","docs","decorators","storyFn","MemoryRouter","DatatableTemplate","args","jsx","Datatable","MinimalConfig","bind","controlsConfig","filteringConfig","fields","dataSize","assets","length","tableConfig","WithDisabledSelection","defaultSelectedRowIds","WithSelectedRows","hasOnlyPerPageSelection","WithSelectedRowsAndExclusionLogic","isMultiSelect","WithSingleSelection","data","WithNoMatchingData","useEffect","DatatableStore","WithNoData","update","s","hasAppliedFilters","defaultIsFilteringApplied","datatableInitialState","WithDisabledBatchModule","isBatchModuleEnabled","WithBatchActions","batchActions","isControlsEnabled","defaultIsColumnsControlsOpen","defaultIsColumnsControlsApplied","WithDisabledControlsAndActiveColumns","hasColumnsControls","WithOpenFiltering","defaultIsFilteringOpen","state","filtersState","hasFiltering","WithOpenAndAppliedFiltering","screenshot","delay","filtersFields","WithAppliedColumns","WithDisabledFiltering","WithOpenAndAppliedColumns","WithOpenColumns","WithDisabledColumns","searchConfig","placeholder","hasSearch","id","WithDisabledSearch","skip","WithSinglePage"],"mappings":"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"}