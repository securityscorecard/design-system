import{j as a}from"./jsx-runtime-Cw0GR0a5.js";import{g as T,r as O}from"./index-CTjT7uj6.js";import{P as u}from"./index-BRV0Se7Z.js";import{C as w}from"./ControlDropdown-DaOWOnEl.js";import{S as H}from"./SortableList-DoUudND8.js";import{D as c}from"./Datatable.store-D58zn130.js";import{z as L,_ as P,L as C,S as $}from"./space-1LtLrmuu.js";import{l as k}from"./lt-BJYS4bbv.js";import{u as N}from"./index-CJIF_j5S.js";import{i as F}from"./isEmptyArray-9kLVyzWX.js";import"./Surface-DpLLkhSd.js";import"./Padbox-DKEfmyAv.js";import"./Stack-D3Wl5zWT.js";import{I as K}from"./Inline-BUcOfxrg.js";import"./Cluster-DAeUfwZi.js";import{T as B,a as G}from"./Text-DTP2ysh1.js";import"./Checkbox-DtOI_Iry.js";import"./Input-CflEDIf9.js";import"./Label-Bgxc31x7.js";import"./Message-6KzRW5US.js";import"./MultiValueInput-D_NZt4Q-.js";import"./Password-DMckXrPE.js";import"./Radio-DvXQpNUS.js";import"./Select-D2oYJWhQ.js";import"./CreatableSelect-DuZZJGpq.js";import"./Range-BxXBtghR.js";import{S as J,a as M}from"./Switch-BouC_1R9.js";import"./TextArea-dzhcLn8B.js";import"./SearchBar-CgCaR-wq.js";import"./SegmentedToggleItem-CNyXGxSM.js";import"./InputGroup-pSAtlOG3.js";import"./DSProvider-IYcK3cWD.js";import{p as Q}from"./DSThemeOverride-BduN1ykm.js";import"./index-DFvsTZbx.js";import"./theme-Cr_I21Pv.js";import{n as b}from"./noop-CLoMDX4X.js";var U=L(function(r){return function(e,t){return r(e,t)?-1:r(t,e)?1:0}}),W=P(function(r,e){return Array.prototype.slice.call(e,0).sort(r)}),X=function o(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){if(r.constructor!==e.constructor)return!1;var t,n,i;if(Array.isArray(r)){if(t=r.length,t!=e.length)return!1;for(n=t;n--!==0;)if(!o(r[n],e[n]))return!1;return!0}if(r.constructor===RegExp)return r.source===e.source&&r.flags===e.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===e.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===e.toString();if(i=Object.keys(r),t=i.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;for(n=t;n--!==0;){var m=i[n];if(!o(r[m],e[m]))return!1}return!0}return r!==r&&e!==e};const j=T(X),Y=o=>(r,e)=>{const t=o.indexOf(r),n=o.indexOf(e);return t===-1&&n>=0?1:t>=0&&n===-1?-1:U(k)(t,n)},x=(o,r)=>{const e=Y(o),t=C(r);return W(e,t)},Z=()=>{const{columns:o,columnOrder:r}=c.useState(l=>({columns:l.columns,columnOrder:l.columnOrder})),[e,t]=O.useState(x(r,o));return O.useEffect(()=>{const l=c.subscribe(s=>({order:s.columnOrder,allColumns:s.columns}),({order:s,allColumns:p})=>{t(x(s,p))});return()=>{l()}},[]),{orderedColumns:e,setLocalColumnOrder:t,storeOrderedColumns:()=>{const l=j(e,C(o));c.update(s=>{s.columnOrder=l?[]:e})},reinitializeOrderedColumns:()=>{t(x(r,o))},resetOrderedColumns:()=>{t(C(o))},isInDefaultOrder:j(e,C(o))}},ee=()=>{const o=c.useState(s=>s.hiddenColumns),[r,e]=O.useState(o);N(()=>{e(o)},[o]);const t=(s,p)=>{e(p===!0?d=>d.filter(h=>h!==s):d=>[...d,s])},n=F(r);return{hiddenColumns:r,setHiddenColumn:t,storeVisibleColumns:()=>{c.update(s=>{s.hiddenColumns=r})},reinitializeVisibleColumns:()=>{e(o)},resetVisisbleColumns:()=>{e([])},isInDefaultVisibility:n}},y=({children:o,isOpen:r=!1,onClose:e=b,onApply:t=b,onReset:n=b})=>{const i=O.useRef(null),{orderedColumns:m,setLocalColumnOrder:l,storeOrderedColumns:s,reinitializeOrderedColumns:p,resetOrderedColumns:d,isInDefaultOrder:h}=Z(),{hiddenColumns:g,setHiddenColumn:V,storeVisibleColumns:v,reinitializeVisibleColumns:z,resetVisisbleColumns:R,isInDefaultVisibility:q}=ee(),D=c.useState(S=>S.columns),_=()=>{e(),p(),z()},I=()=>{t(!h||!q),s(),v()},A=()=>{n(),d(),R()};return a.jsxs("span",{ref:i,children:[typeof o=="function"?o({hiddenColumns:g.length}):o,a.jsx(w,{isOpen:r,parentRef:i,title:"Toggle columns",onClose:_,onReset:A,onSubmit:I,children:a.jsx(H,{items:m,labels:Q("label")(D),maxHeight:300,renderItem:({label:S,id:f})=>a.jsxs(K,{align:"center","data-id":f,gap:$.sm,justify:"space-between",children:[a.jsx(B,{size:G.md,children:S}),a.jsx(J,{checked:!g.includes(f),name:`visibility-${f}`,size:M.sm,switchId:`visibility-${f}`,onChange:E=>{V(f,E.target.checked)}})]}),onOrderChange:l})})]})};y.propTypes={children:u.oneOfType([u.func,u.node]).isRequired,onClose:u.func.isRequired,onApply:u.func.isRequired,isOpen:u.bool,onReset:u.func};const Le=y;try{y.displayName="ColumnsControls",y.__docgenInfo={description:"",displayName:"ColumnsControls",props:{isOpen:{defaultValue:{value:"false"},description:"",name:"isOpen",required:!1,type:{name:"boolean"}},onOpen:{defaultValue:null,description:"",name:"onOpen",required:!0,type:{name:"() => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onApply:{defaultValue:null,description:"",name:"onApply",required:!0,type:{name:"(shouldApply: boolean) => void"}},onReset:{defaultValue:null,description:"",name:"onReset",required:!1,type:{name:"() => void"}}}}}catch{}export{Le as C};
