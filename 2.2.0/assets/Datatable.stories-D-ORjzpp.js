import{j as A}from"./jsx-runtime-Cw0GR0a5.js";import{r as e}from"./index-CTjT7uj6.js";import{a as t}from"./chunk-454WOBUV-DWuJqIWT.js";import{M as z,a as c}from"./ipAssets-Cyv8vW9V.js";import{s as B}from"./columns-CdAD4kKQ.js";import{c as E}from"./docs-CvwVg-te.js";import{f as N}from"./options-CXN77Xuf.js";import{b as x,d as V}from"./actions-16IZvRih.js";import{a as j,d as M}from"./defaultConfigs-DJfQTMcK.js";import{D as T}from"./Datatable-C-4W1zCh.js";import{M as J}from"./react-router-dom-Dge5SpE2.js";import"./v4-D8aEg3BZ.js";import"./Text-DTP2ysh1.js";import"./space-1LtLrmuu.js";import"./index-BRV0Se7Z.js";import"./index-C7IrpltL.js";import"./Tooltip-D-FMcIGF.js";import"./DSProvider-IYcK3cWD.js";import"./extends-CF3RwP-h.js";import"./index-DIVhMF2i.js";import"./theme-Cr_I21Pv.js";import"./colors-CyEChGtp.js";import"./Surface-DpLLkhSd.js";import"./flex.types-BrkCVx66.js";import"./useLogger-Cd66DVRc.js";import"./prop-DG2n0FAQ.js";import"./Padbox-DKEfmyAv.js";import"./Stack-D3Wl5zWT.js";import"./Inline-BUcOfxrg.js";import"./Cluster-DAeUfwZi.js";import"./FloatingContext-C7r7lnEb.js";import"./toPairs-Cet-0nBA.js";import"./Filters-DaqJyQg6.js";import"./Icon-4JNizDXH.js";import"./index-DFvsTZbx.js";import"./Spinner-CJrCb2wC.js";import"./ElementLabel-BFX3DrvP.js";import"./Message-6KzRW5US.js";import"./DSThemeOverride-BduN1ykm.js";import"./Paragraph-4LRW5eCl.js";import"./spacing.types-C9Yu1wmA.js";import"./Checkbox-DtOI_Iry.js";import"./check-DkA7BUy7.js";import"./minus-DR9WSvoQ.js";import"./Label-Bgxc31x7.js";import"./Input-CflEDIf9.js";import"./MultiValueInput-D_NZt4Q-.js";import"./index-CJIF_j5S.js";import"./Pill-3kaa-68-.js";import"./PillRemoveButton-CS7bxu8m.js";import"./PillLabel-CLRUhFaA.js";import"./gt-mgGmHlKl.js";import"./isNonEmptyArray-CGykYah7.js";import"./isNotEmpty-Dh9FcTil.js";import"./isArray-D_RvpTHQ.js";import"./both-peGKknMH.js";import"./isEmptyArray-9kLVyzWX.js";import"./noop-CLoMDX4X.js";import"./isNonEmptyString-zJHoJ8N4.js";import"./isNotNull-B1xFkUZ3.js";import"./trim-C2DDSsAv.js";import"./take-Kg9EtPoO.js";import"./Password-DMckXrPE.js";import"./Radio-DvXQpNUS.js";import"./Select-D2oYJWhQ.js";import"./unsupportedIterableToArray-xuqNRLo1.js";import"./setPrototypeOf-DgZC2w_0.js";import"./action.types-CSW_hKjS.js";import"./Button.enums-DxFt5drl.js";import"./BaseButton-D1TUSAxp.js";import"./require-router-link-DHB4GfDh.js";import"./Button-vDRI25at.js";import"./pick-Dgh-9MLD.js";import"./isNotNilOrEmpty-cGK6as13.js";import"./isNilOrEmpty-MGEuPZ7r.js";import"./isNil-C1Q7XXIj.js";import"./sortBy-BCHo5fjk.js";import"./CreatableSelect-DuZZJGpq.js";import"./Range-BxXBtghR.js";import"./Switch-BouC_1R9.js";import"./subtract-BgQ2JsUW.js";import"./TextArea-dzhcLn8B.js";import"./mergeRefs-sWHjowoU.js";import"./SearchBar-CgCaR-wq.js";import"./SegmentedToggleItem-CNyXGxSM.js";import"./BaseTabLabel-QgyaGmc-.js";import"./InputGroup-pSAtlOG3.js";import"./BaseDateRangePicker-DYt_PHqx.js";import"./SingleDatePicker-DIUObEQq.js";import"./isNativeReflectConstruct-lfp1ZYuW.js";import"./usePopper-B6Vq3Q19.js";import"./propEq-t9RR3tDE.js";import"./head-BrnRDcRk.js";import"./defaultTo-C2m3wrMk.js";import"./BottomBar-3IK260rR.js";import"./all-iEGJVrnb.js";import"./when-Da_5hu2U.js";import"./Heading-C-vyOsFk.js";import"./BaseTable.types-Bwas8yEY.js";import"./BaseTable.styles-vsfZhh3j.js";import"./BaseLink-D20DZbIA.js";import"./flip-CEUNNqfM.js";import"./DropdownMenu-0cqzWS2f.js";import"./Dropdown-Bz5N8_Wi.js";import"./ControlledDropdown-D7eVtMr8.js";import"./useOuterCallback-Mi4Xn43N.js";import"./inheritsLoose-B6jfs0L0.js";import"./DropdownMenu.types-BiMILHFG.js";import"./ellipsisH-CxP8BjCT.js";import"./Footer-BBoJAj4g.js";import"./Datatable.store-D58zn130.js";import"./BatchActions-DiRQPLmd.js";import"./ControlsModule-BSVnVBpQ.js";import"./ColumnsControls-gjbtFimJ.js";import"./ControlDropdown-DaOWOnEl.js";import"./CloseButton-Ddazfl7Y.js";import"./SortableList-DoUudND8.js";import"./sortable.esm-CWiKwvcN.js";import"./modifiers.esm-D9Gd6yO_.js";import"./lt-BJYS4bbv.js";import"./ControlButton-Bah5uQC8.js";import"./Badge-BMh3jQcX.js";import"./omit-C7oLbB4m.js";import"./zipObj-DVsQulIT.js";import"./BatchModule-D8Rgyd2L.js";import"./ElementCounter-DYqCrMI5.js";import"./Table-DIr6morF.js";import"./index-BEgBEHMz.js";import"./F-DymNqVSm.js";import"./useColumnsControls-aIA7mA2A.js";import"./useLocalStorageState-CgPcEN2x.js";import"./tiny-invariant-CopsF_GD.js";const q={fields:N,onApply:t("onFiltersApply"),onChange:t("onFiltersChange"),onClose:t("onFiltersClose")},D={filteringConfig:q,searchConfig:{onSearch:t("onSearch"),onClear:t("onClear")},onColumnVisibilityChange:t("columnVisibilityChange")},H=`{
  Header: string;
  cellType?: CellTypes;
  cellLinkComponent?: ReactComponentLike;
  cellOnClick?: (value: CellValue, rowData: D) => void;
  cellHrefComposer?: (value: CellValue, rowData: D) => string;
  cellToComposer?: (value: CellValue, rowData: D) => To;
  cellFormatter?: (value: CellValue, rowData: D) => string;
  cellTooltipPopupComposer?: (value: CellValue, rowData: D) => JSX.Element;
  nullCondition?: (value: CellValue) => boolean;
  nullConditionValue?: string;
  multiValueDisplayLimit?: number;
  headerTooltip?: JSX.Element;

  ...rest of Column options from 'react-table'
}`,_=`| string
| (originalRow: D, relativeIndex: number, parent?: Row<D>) => string`,X=`| HandlerActionKind
| AbsoluteLinkActionKind
| RelativeLinkActionKind
| ActionWithSubactions
`,W=`{
  hasSelection: boolean;
  onSelect: (
    ids: IdType<D>[],
    hasExclusiveSelection: boolean,
  ) => void;
  defaultSelectedRowIds: IdType<D>[];
  hasPagination: boolean;
  hasServerSidePagination: boolean;
  defaultPageSize: number;
  hasSorting: boolean;
  hasServerSideSorting: boolean;
  defaultSortBy: {
    id: IdType<D>;
    desc?: boolean;
  }[];
  rowActions: RowAction<D>[];
  NoMatchingDataComponent: ReactComponentLike;
  NoDataComponent: ReactComponentLike;
}`,Z=`{
  hasSearch: boolean;
  searchConfig: Partial<SearchBarProps>;
  hasFiltering: boolean;
  filteringConfig: Partial<FiltersProps>;
  defaultIsFilteringOpen: boolean;
  defaultIsFilteringApplied: boolean;
  onControlToggle: (control: Controls, isActive: boolean) => void;
}`,$=`({
  pageSize: number;
  pageIndex: number;
  sortBy: SortingRule<D>[];
  filters: Filter[];
  query: string;
}) => void;`;z.set("2021-03-31T00:00:00Z");const De={title:"components/Datatable",component:T,parameters:{screenshot:{skip:!0},docs:{source:{type:"code"},description:{component:`
\`\`\`jsx
import { Datatable } from '@securityscorecard/design-system';

const MyFancyDatatable = () => <Datatable ...props />
\`\`\`

  ${E}
      `}}},decorators:[r=>A.jsx(J,{children:r()})],argTypes:{data:{control:{disable:!0}},dataSize:{control:{disable:!0}},columns:{control:{disable:!0},table:{type:{summary:"Columns<D>[]",detail:H}}},isDataLoading:{control:{disable:!0}},pageButtonsCount:{control:{disable:!1},defaultValue:5},dataPrimaryKey:{table:{type:{summary:"PrimaryKey<D>",detail:_}}},batchActions:{table:{type:{summary:"Action[]",detail:X}}},controlsConfig:{table:{type:{summary:"Partial<ControlsConfig>",detail:Z},defaultValue:{summary:"defaultControlsConfig",detail:JSON.stringify(j,null,2)}}},tableConfig:{table:{type:{summary:"Partial<TableConfig<D>>",detail:W},defaultValue:{summary:"defaultTableConfig",detail:JSON.stringify(M,null,2)}}},onDataFetch:{control:{disable:!0},table:{type:{summary:"OnDataFetchFn<D>",detail:$},defaultValue:{summary:"noop"}}}}},s=r=>{const[m,i]=e.useState([]),[d,a]=e.useState(!0),[u,f]=e.useState(0),p=e.useRef(),n=e.useCallback(({pageSize:S,pageIndex:R})=>{t("onDataFetch")({pageSize:S,pageIndex:R}),a(!0),p.current=setTimeout(()=>{const w=S*R,O=w+S,k=c.slice(w,O);i(k),f(c.length),a(!1)},500)},[a,i]);e.useEffect(()=>{n({pageSize:50,pageIndex:0})},[n]);const{batchActions:C=[],controlsConfig:g={},dataPrimaryKey:h,tableConfig:o={},...b}=r,y=()=>{clearTimeout(p.current),a(!1)};return A.jsx(T,{...b,batchActions:[...C,...x],columns:B,controlsConfig:{...g,...D},data:m,dataPrimaryKey:h||"ipAddress",dataSize:u,isDataLoading:d,tableConfig:{...o,rowActions:[...(o==null?void 0:o.rowActions)||[],...V],onSelect:t("onRowSelect")},onCancelLoading:y,onDataFetch:n})};s.storyName="Playground (Server-Side implementation)";const l=r=>{const[m,i]=e.useState(c),d=e.useRef(null),a=o=>{d.current=o},u=o=>{t("onSearch")(o);const b=c.filter(y=>y.ipAddress.includes(o));i(b)},f=()=>{t("onClear")(),i(c)},{batchActions:p=[],controlsConfig:n={},dataPrimaryKey:C,tableConfig:g={},...h}=r;return A.jsx(T,{...h,batchActions:[...p,...x],columns:B,controlsConfig:{...D,...n,searchConfig:{...D.searchConfig,...n.searchConfig,onSearch:u,onClear:f}},data:m,dataPrimaryKey:C||"ipAddress",dataSize:m.length,resetSelectionFn:a,tableConfig:{...g,rowActions:[...g.rowActions||[],...V],onSelect:t("onRowSelect"),hasServerSidePagination:!1,hasServerSideSorting:!1}})};l.storyName="Playground (In-Browser implementation)";var P,F,L;s.parameters={...s.parameters,docs:{...(P=s.parameters)==null?void 0:P.docs,source:{originalSource:`args => {
  const [tableData, setTableData] = useState<Data[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [totalLength, setTotalLength] = useState(0);
  const timeoutRef = useRef<NodeJS.Timeout | undefined>();
  const dispatchFetchData = useCallback(({
    pageSize,
    pageIndex
  }) => {
    action('onDataFetch')({
      pageSize,
      pageIndex
    });
    setIsLoading(true);
    timeoutRef.current = setTimeout(() => {
      const startRow = pageSize * pageIndex;
      const endRow = startRow + pageSize;
      const fetchedData: Data[] = assets.slice(startRow, endRow);
      setTableData(fetchedData);
      setTotalLength(assets.length);
      setIsLoading(false);
    }, 500);
  }, [setIsLoading, setTableData]);
  useEffect(() => {
    dispatchFetchData({
      pageSize: 50,
      pageIndex: 0
    });
  }, [dispatchFetchData]);
  const {
    batchActions: argsBatchActions = [],
    controlsConfig: argsControlsConfig = {},
    dataPrimaryKey: argsDataPrimaryKey,
    tableConfig: argsTableConfig = {},
    ...restArgs
  } = args;
  const onCancelLoading = () => {
    clearTimeout(timeoutRef.current);
    setIsLoading(false);
  };
  return <Datatable<Data> {...restArgs} batchActions={[...argsBatchActions, ...datatableBatchActions]} columns={simpleColumns} controlsConfig={{
    ...argsControlsConfig,
    ...controlsConfig
  }} data={tableData} dataPrimaryKey={argsDataPrimaryKey || 'ipAddress'} dataSize={totalLength} isDataLoading={isLoading} tableConfig={{
    ...argsTableConfig,
    rowActions: [...(argsTableConfig?.rowActions || []), ...datatableRowActions],
    onSelect: action('onRowSelect')
  }} onCancelLoading={onCancelLoading} onDataFetch={dispatchFetchData} />;
}`,...(L=(F=s.parameters)==null?void 0:F.docs)==null?void 0:L.source}}};var v,I,K;l.parameters={...l.parameters,docs:{...(v=l.parameters)==null?void 0:v.docs,source:{originalSource:`args => {
  const [data, setData] = useState(assets);
  const resetFilter = useRef(null);
  const storeResetFn = resetFn => {
    resetFilter.current = resetFn;
  };
  const handleOnSearch = query => {
    action('onSearch')(query);
    const result = assets.filter(asset => asset.ipAddress.includes(query));
    setData(result);
  };
  const handleOnClearSearch = () => {
    action('onClear')();
    setData(assets);
  };
  const {
    batchActions: argsBatchActions = [],
    controlsConfig: argsControlsConfig = {},
    dataPrimaryKey: argsDataPrimaryKey,
    tableConfig: argsTableConfig = {},
    ...restArgs
  } = args;
  return <Datatable<Data> {...restArgs} batchActions={[...argsBatchActions, ...datatableBatchActions]} columns={simpleColumns} controlsConfig={{
    ...controlsConfig,
    ...argsControlsConfig,
    searchConfig: {
      ...controlsConfig.searchConfig,
      ...argsControlsConfig.searchConfig,
      onSearch: handleOnSearch,
      onClear: handleOnClearSearch
    }
  }} data={data} dataPrimaryKey={argsDataPrimaryKey || 'ipAddress'} dataSize={data.length} resetSelectionFn={storeResetFn} tableConfig={{
    ...argsTableConfig,
    rowActions: [...(argsTableConfig.rowActions || []), ...datatableRowActions],
    onSelect: action('onRowSelect'),
    hasServerSidePagination: false,
    hasServerSideSorting: false
  }} />;
}`,...(K=(I=l.parameters)==null?void 0:I.docs)==null?void 0:K.source}}};const Ae=["ServerSidePlayground","InBrowserPlayground"];export{l as InBrowserPlayground,s as ServerSidePlayground,Ae as __namedExportsOrder,De as default};
