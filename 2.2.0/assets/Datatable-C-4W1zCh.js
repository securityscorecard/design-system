import{j as m}from"./jsx-runtime-Cw0GR0a5.js";import{r as d}from"./index-CTjT7uj6.js";import{P as e}from"./index-BRV0Se7Z.js";import{z as L,s as _,k as T,q as M,i as N,j,p as B,V as k}from"./space-1LtLrmuu.js";import{a as q}from"./index-CJIF_j5S.js";import"./Surface-DpLLkhSd.js";import{P as z}from"./Padbox-DKEfmyAv.js";import"./Stack-D3Wl5zWT.js";import"./Inline-BUcOfxrg.js";import"./Cluster-DAeUfwZi.js";import{c as K,d as H}from"./Filters-DaqJyQg6.js";import{D as s,d as $}from"./Datatable.store-D58zn130.js";import{p as U}from"./pick-Dgh-9MLD.js";import{w as X}from"./when-Da_5hu2U.js";import{p as G}from"./propEq-t9RR3tDE.js";import{A as J}from"./BatchActions-DiRQPLmd.js";import{m as Q,b as W}from"./defaultConfigs-DJfQTMcK.js";import{C as Y}from"./ControlsModule-BSVnVBpQ.js";import{B as Z}from"./BatchModule-D8Rgyd2L.js";import{T as ee}from"./Table-DIr6morF.js";import{R as ae}from"./BaseTable.types-Bwas8yEY.js";import{u as oe}from"./useColumnsControls-aIA7mA2A.js";import{u as te}from"./useLocalStorageState-CgPcEN2x.js";import{h as ne,i as le}from"./Select-D2oYJWhQ.js";import{n as x}from"./noop-CLoMDX4X.js";var re=L(function(o){for(var l={},t=0;t<o.length;)l[o[t][0]]=o[t][1],t+=1;return l});const se=re,ie=a=>{d.useEffect(()=>{const o=s.subscribe(U(["pageIndex","pageSize","sortBy","filters","query","isCanceled"]),X(G("isCanceled",!1),a));return()=>{o()}},[a])},ue=(a,o)=>{d.useEffect(()=>s.update(l=>{l.selectedIds=o}),[o]),d.useEffect(()=>{const l=s.subscribe(t=>({ids:t.selectedIds,hasExclusiveSelection:t.hasExclusiveSelection}),({ids:t,hasExclusiveSelection:p})=>{a(t,p)});return()=>{l()}},[a])},de={onSelect:e.func,NoDataComponent:e.elementType,NoMatchingDataComponent:e.elementType,hasSelection:e.bool,isMultiSelect:e.bool,hasOnlyPerPageSelection:e.bool,defaultSelectedRowIds:e.arrayOf(e.oneOfType([e.string,e.number])),hasPagination:e.bool,hasServerSidePagination:e.bool,defaultPageSize:e.number,hasSorting:e.bool,hasServerSideSorting:e.bool,defaultPageIndex:e.number,defaultSortBy:e.arrayOf(e.shape({id:e.string.isRequired,desc:e.bool})),defaultHiddenColumns:e.arrayOf(e.oneOfType([e.string,e.number])),defaultColumnOrder:e.arrayOf(e.oneOfType([e.string,e.number])),rowActions:e.arrayOf(ae)},ce=_(z).withConfig({displayName:"Datatable__StyledDatatable",componentId:"sc-ekhe1z-0"})(["display:flex;flex-direction:column;position:relative;border:1px solid ",";border-radius:",";background:",";"],T("neutral.300"),M("double"),T("neutral.0")),me=a=>B(k(o=>[o,!0]),se)(a);function f({id:a,data:o,dataSize:l,columns:t,dataPrimaryKey:p,onCancelLoading:g,isDataLoading:y=!1,onDataFetch:v=x,batchActions:E=[],isControlsEnabled:h=!0,isBatchModuleEnabled:V=!0,controlsConfig:O={},tableConfig:S={},resetSelectionFn:b}){const[n,w]=te(`datatable_${a}`);d.useEffect(()=>a?s.subscribe(r=>({hiddenColumns:r.hiddenColumns,columnOrder:r.columnOrder}),r=>{w(r)}):void 0,[]),d.useEffect(()=>()=>s.replace(ne("isCanceled",!0,$)),[]);const C=N(g),{onColumnOrderChange:I,onColumnVisibilityChange:A,...c}=q(()=>Q(le(["filteringConfig","isCancelEnabled"],C)(O)),[O]),{onSelect:R,defaultSelectedRowIds:D,hasOnlyPerPageSelection:F,...i}=q(()=>W(S),[S]);ie(v),ue(R,D),oe(I,A,t,(n==null?void 0:n.columnOrder)||i.defaultColumnOrder,(n==null?void 0:n.hiddenColumns)||i.defaultHiddenColumns);const P=C?()=>{s.update(u=>{u.isCanceled=!0,u.filters=u.filters.map(r=>({...r,isCanceled:r.isLoading,isLoading:!1})),g()})}:x;return b==null||b(()=>{s.update(u=>{u.shouldResetSelectedRows=!0})}),m.jsxs(ce,{className:j,children:[h&&m.jsx(Y,{...c,isDataLoading:y,onCancelLoading:P}),V&&m.jsx(Z,{actions:E,columns:{isButtonDisplayed:!h&&c.hasColumnsControls,defaultIsColumnsControlsOpen:c.defaultIsColumnsControlsOpen,defaultIsColumnsControlsApplied:c.defaultIsColumnsControlsApplied},dataSize:l,hasOnlyPerPageSelection:F,hasSelection:i.hasSelection}),m.jsx(ee,{columns:t,data:o,dataPrimaryKey:p,dataSize:l,defaultSelectedRows:me(D),...i,defaultColumnOrder:(n==null?void 0:n.columnOrder)||i.defaultColumnOrder,defaultHiddenColumns:(n==null?void 0:n.hiddenColumns)||i.defaultHiddenColumns,isCancelDisabled:!C,isDataLoading:y,onCancelLoading:P})]})}f.propTypes={data:e.arrayOf(e.shape({})).isRequired,dataSize:e.number.isRequired,columns:e.arrayOf(e.shape({})).isRequired,isDataLoading:e.bool,batchActions:e.arrayOf(J),dataPrimaryKey:e.oneOfType([e.string,e.func]),isControlsEnabled:e.bool,controlsConfig:e.exact({onControlToggle:e.func,onCancelLoading:e.func,onColumnVisibilityChange:e.func,hasSearch:e.bool,searchConfig:e.exact({placeholder:e.string,onSearch:e.func,onClear:e.func,defaultValue:e.string,isValidatedOnSubmit:e.bool,pattern:e.string,errorMessage:e.string}),hasFiltering:e.bool,filteringConfig:e.exact({onChange:e.func,onApply:e.func,onClose:e.func,state:e.arrayOf(K),fields:e.arrayOf(H),isCancelEnabled:e.bool}),defaultIsFilteringOpen:e.bool,defaultIsFilteringApplied:e.bool,hasColumnsControls:e.bool,onColumnOrderChange:e.func,defaultIsColumnsControlsOpen:e.bool,defaultIsColumnsControlsApplied:e.bool}),tableConfig:e.exact(de),pageButtonsCount:e.number,resetSelectionFn:e.func,onDataFetch:e.func,onCancelLoading:e.func};f.displayName="Datatable";try{f.displayName="Datatable",f.__docgenInfo={description:"",displayName:"Datatable",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"Table data you want to display",name:"data",required:!0,type:{name:"D[]"}},dataSize:{defaultValue:null,description:"Total size of data",name:"dataSize",required:!0,type:{name:"number"}},columns:{defaultValue:null,description:`Settings for each table column.

Extends: https://react-table.tanstack.com/docs/api/useTable#column-options`,name:"columns",required:!0,type:{name:"Column<D>[]"}},isDataLoading:{defaultValue:{value:"false"},description:"Flag to determine wheter data is currently loading",name:"isDataLoading",required:!1,type:{name:"boolean"}},onCancelLoading:{defaultValue:null,description:"Cancel function called upon request cancellation.",name:"onCancelLoading",required:!1,type:{name:"() => void"}},onDataFetch:{defaultValue:null,description:"Data fetch function called upon pagination, sorting, filtering and searching",name:"onDataFetch",required:!1,type:{name:"OnDataFetchFn<D>"}},batchActions:{defaultValue:{value:"[]"},description:`List of available batch actions for table

See: [action.types.ts](https://github.com/securityscorecard/design-system/blob/main/src/types/action.types.ts)`,name:"batchActions",required:!1,type:{name:"Action<BatchActionArgs>[]"}},dataPrimaryKey:{defaultValue:null,description:`Name of column used as table primary key or function to retrieve the key

Return value is used as id for selected rows`,name:"dataPrimaryKey",required:!1,type:{name:"PrimaryKey<D>"}},isControlsEnabled:{defaultValue:{value:"true"},description:"Flag to enable/disable top controls module",name:"isControlsEnabled",required:!1,type:{name:"boolean"}},isBatchModuleEnabled:{defaultValue:{value:"true"},description:"Flag to enable/disable batch actions module with element counter",name:"isBatchModuleEnabled",required:!1,type:{name:"boolean"}},controlsConfig:{defaultValue:{value:"{}"},description:`Config object for controls module

See: [ControlsModule.types.ts](https://github.com/securityscorecard/design-system/blob/main/src/components/Datatable/ControlsModule/ControlsModule.types.ts)`,name:"controlsConfig",required:!1,type:{name:"Partial<ControlsConfig<D>>"}},tableConfig:{defaultValue:{value:"{}"},description:`Config object for table

See: [Table.types.ts](https://github.com/securityscorecard/design-system/blob/main/src/components/Datatable/Table/Table.types.ts)`,name:"tableConfig",required:!1,type:{name:"Partial<TableConfig<D>>"}},resetSelectionFn:{defaultValue:null,description:"Function that allow storing selection reset function in the parent component",name:"resetSelectionFn",required:!1,type:{name:"(resetFn: () => void) => void"}}}}}catch{}export{f as D};
