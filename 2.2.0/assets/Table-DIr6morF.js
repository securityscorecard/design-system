import{j as a}from"./jsx-runtime-Cw0GR0a5.js";import{R as me,r}from"./index-CTjT7uj6.js";import{s as A,k as _,h as fe,i as ge,f as be,e as ye,p as he,a6 as Ce,S as V,L as Se}from"./space-1LtLrmuu.js";import{r as f,L as xe}from"./index-BEgBEHMz.js";import{c as Re}from"./index-C7IrpltL.js";import{f as je}from"./Heading-C-vyOsFk.js";import{P as we}from"./Paragraph-4LRW5eCl.js";import{a as Te}from"./Text-DTP2ysh1.js";import{c as O,b as Ie,B as qe,a as Be,S as De,C as Ve}from"./BaseTable.styles-vsfZhh3j.js";import{g as Ee,H as Le,B as Ne}from"./BaseTable.types-Bwas8yEY.js";import{F as ke}from"./Footer-BBoJAj4g.js";import{D as u}from"./Datatable.store-D58zn130.js";import{T as ve,L as Pe}from"./defaultConfigs-DJfQTMcK.js";import"./Surface-DpLLkhSd.js";import{P as Ae}from"./Padbox-DKEfmyAv.js";import{S as E}from"./Stack-D3Wl5zWT.js";import"./Inline-BUcOfxrg.js";import"./Cluster-DAeUfwZi.js";import"./DSProvider-IYcK3cWD.js";import"./DSThemeOverride-BduN1ykm.js";import"./index-DFvsTZbx.js";import"./theme-Cr_I21Pv.js";import{B as _e}from"./Button.enums-DxFt5drl.js";import{B as Oe}from"./Button-vDRI25at.js";import{s as Fe}from"./F-DymNqVSm.js";import{p as C}from"./prop-DG2n0FAQ.js";import{i as He}from"./isNonEmptyArray-CGykYah7.js";import{w as L}from"./when-Da_5hu2U.js";import{p as ze}from"./pick-Dgh-9MLD.js";import{a as N}from"./isNonEmptyString-zJHoJ8N4.js";import{p as j}from"./propEq-t9RR3tDE.js";const c={deselectAllRows:"deselectAllRows",toggleSingleRowSelected:"toggleSingleRowSelected",cancelLoading:"cancelLoading",preserveState:"preserveState"},Me=({collectFetchParams:n})=>(t,o)=>{const{pageSize:s,sortBy:i,previousState:d}=t;switch(o.type){case c.preserveState:return{...t,previousState:t};case c.cancelLoading:return d?{previousState:d,...d}:t;case"toggleSortBy":return setTimeout(()=>{n(0,s,i)},0),{...t,pageIndex:0};case c.deselectAllRows:return{...t,selectedRowIds:{}};case c.toggleSingleRowSelected:return{...t,selectedRowIds:{...o.id in t.selectedRowIds?{}:{[o.id]:!0}}}}return t},k=me.forwardRef(({id:n,indeterminate:t,isDisabled:o=!1,...s},i)=>{const d=r.useRef(),p=i||d;return r.useEffect(()=>{p.current.indeterminate=t},[p,t]),a.jsx(ve,{ref:p,checkboxId:n,isDisabled:o,isIndeterminate:t,name:s.title,type:"checkbox",...s})});function Ge(){return{id:O,sticky:"left",width:48,disableSortBy:!0,Header:({getToggleAllRowsSelectedProps:n,dataSize:t,isMultiSelect:o,dispatch:s,state:{selectedRowIds:i}})=>{if(t===0)return null;const d=Object.keys(i).length,p=d>0&&d<t;return a.jsx(k,{id:"header-select-all",...n({...o?{}:{onChange(){s({type:c.deselectAllRows})}}}),indeterminate:p,isDisabled:!o&&d===0})},cellType:Ie.selection,Cell:({isMultiSelect:n,row:t,dispatch:o})=>{const s=`row-${t.id}`;return a.jsx(k,{id:s,...t.getToggleRowSelectedProps({...n?{}:{onChange(i){o({type:c.toggleSingleRowSelected,id:t.id,value:i.target.checked})}}})})}}}const Ue=A.div.withConfig({displayName:"Table__NoDataOutline",componentId:"sc-1wjy85k-0"})(["border-top:1px solid ",";"],_("neutral.300")),v=A(Ae).withConfig({displayName:"Table__NoDataContainer",componentId:"sc-1wjy85k-1"})(["display:flex;flex-direction:column;background:",";padding:",";"],_("neutral.0"),fe(64)),P=(n,t,o)=>{u.update(s=>{s.pageIndex=n,s.pageSize=t,s.sortBy=o,s.isCanceled=!1})},We=n=>{u.update(t=>{t.selectedIds=Se(n)})},$e=n=>a.jsx(Ve,{...n});function w({columns:n,data:t,dataPrimaryKey:o,dataSize:s,isDataLoading:i,rowActions:d,NoMatchingDataComponent:p,NoDataComponent:F,hasSelection:H,isMultiSelect:z,defaultSelectedRows:M,hasPagination:G,hasServerSidePagination:b,isCancelDisabled:U,onCancelLoading:W,defaultPageSize:y,hasSorting:$,hasServerSideSorting:J,defaultSortBy:S,defaultPageIndex:x,defaultColumnOrder:K,defaultHiddenColumns:Q,pageButtonsCount:X}){const g=r.useMemo(()=>b?s:t.length,[b,s,t]),Y=u.useState(e=>e.hasExclusiveSelection),Z=u.useState(e=>e.hiddenColumns.length),ee=u.useState(e=>e.hasAppliedFilters),te=r.useMemo(()=>({minWidth:40,width:150,maxWidth:400,nullCondition:Fe,Cell:e=>$e(e),cellType:"text"}),[]),{getTableProps:ae,getTableBodyProps:ne,headerGroups:se,page:oe,rows:le,prepareRow:re,gotoPage:R,pageCount:T,dispatch:m,setColumnOrder:I,setHiddenColumns:q,state:{pageIndex:B,selectedRowIds:D,pageSize:ie,sortBy:ue}}=f.useTable({columns:n,data:t,defaultColumn:te,initialState:{pageSize:y,pageIndex:x,sortBy:S,selectedRowIds:M,columnOrder:K,hiddenColumns:Q},manualPagination:b,pageCount:Math.ceil(g/y),autoResetPage:!1,disableSortBy:!$,manualSortBy:J,autoResetSortBy:!1,autoResetSelectedRows:!1,...ge(o)&&{getRowId:be(o)?C(o):o},stateReducer:Me({collectFetchParams:P}),rowActions:d,dataSize:g,isMultiSelect:z},f.useColumnOrder,f.useSortBy,f.usePagination,f.useRowSelect,f.useFlexLayout,e=>{e.visibleColumns.push(l=>[...H?[Ge()]:[],...l,...He(d)?[Ee()]:[]])}),h=r.useCallback(()=>R(0),[R]),de=e=>{R(e),P(e,ie,ue)},ce=()=>{u.update(e=>{e.hiddenColumns=[]})};return r.useEffect(()=>{const e=u.subscribe(C("isCanceled"),l=>{l&&m({type:c.cancelLoading})});return()=>{e()}},[m]),r.useEffect(()=>{i||m({type:c.preserveState})},[m,i]),r.useEffect(()=>{const e=u.createReaction(l=>l.shouldResetSelectedRows,(l,pe)=>{l&&(m({type:c.deselectAllRows}),pe.shouldResetSelectedRows=!1)});return()=>{e()}},[m]),r.useEffect(()=>{const e=u.subscribe(l=>l.columnOrder,l=>{I(l)});return()=>{e()}},[I]),r.useEffect(()=>{const e=u.subscribe(l=>l.hiddenColumns,l=>{q(n.length===l.length?[...l,O]:l)});return()=>{e()}},[q,n.length]),r.useEffect(()=>{const e=u.subscribe(C("pageIndex"),L(ye(0),h));return()=>{e()}},[h,B]),r.useEffect(()=>{const e=u.subscribe(ze(["filters","isCanceled"]),L(N([j("isCanceled",!1),he(C("filters"),Ce(N([j("isLoading",!0),j("isCanceled",!1)])))]),h));return()=>{e()}},[h]),r.useEffect(()=>{We(D)},[D]),r.useEffect(()=>{u.update(e=>{e.pageIndex=x,e.sortBy=S,e.pageSize=y})},[x,S,y]),a.jsxs(a.Fragment,{children:[a.jsxs(qe,{children:[a.jsx(Be,{tabIndex:0,children:a.jsxs(De,{className:Re({"has-exclusive-selection":Y}),...ae(),children:[a.jsx(Le,{headerGroups:se}),a.jsx(Ne,{prepareRow:re,rows:b?le:oe,...ne()})]})}),g>0&&i&&a.jsx(Pe,{isCancelable:!U,onCancel:W})]}),Z===n.length&&a.jsx(Ue,{children:a.jsx(v,{children:a.jsxs(E,{gap:V.sm,justify:"flex-start",children:[a.jsxs(E,{gap:V.md,children:[a.jsxs(je,{children:[s," ",s===1?"items":"item"," found"]}),a.jsx(we,{size:Te.md,children:"But all columns are hidden at the moment."})]}),a.jsx(Oe,{variant:_e.text,onClick:ce,children:"Show Default Columns"})]})})}),g===0?a.jsx(v,{children:i?a.jsx(xe,{}):ee?a.jsx(p,{}):a.jsx(F,{})}):T!==1?a.jsx(ke,{hasPagination:G&&g>0,isDataLoading:i,pageButtonsCount:X,pageCount:T,pageIndex:B,onGotoPage:de}):null]})}w.displayName="Table";try{w.displayName="Table",w.__docgenInfo={description:"",displayName:"Table",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"D[]"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"Column<D>[]"}},dataSize:{defaultValue:null,description:"",name:"dataSize",required:!0,type:{name:"number"}},isDataLoading:{defaultValue:null,description:"",name:"isDataLoading",required:!0,type:{name:"boolean"}},onCancelLoading:{defaultValue:null,description:"",name:"onCancelLoading",required:!0,type:{name:"() => void"}},dataPrimaryKey:{defaultValue:null,description:"",name:"dataPrimaryKey",required:!1,type:{name:"PrimaryKey<D>"}},defaultSelectedRows:{defaultValue:null,description:"",name:"defaultSelectedRows",required:!1,type:{name:"Record<IdType<D>, boolean>"}},defaultPageIndex:{defaultValue:null,description:"",name:"defaultPageIndex",required:!0,type:{name:"number"}},rowActions:{defaultValue:null,description:"",name:"rowActions",required:!0,type:{name:"RowAction<D>[]"}},NoDataComponent:{defaultValue:null,description:"",name:"NoDataComponent",required:!0,type:{name:"ReactComponentLike"}},NoMatchingDataComponent:{defaultValue:null,description:"",name:"NoMatchingDataComponent",required:!0,type:{name:"ReactComponentLike"}},hasSelection:{defaultValue:null,description:"",name:"hasSelection",required:!0,type:{name:"boolean"}},isMultiSelect:{defaultValue:null,description:"",name:"isMultiSelect",required:!0,type:{name:"boolean"}},hasPagination:{defaultValue:null,description:"",name:"hasPagination",required:!0,type:{name:"boolean"}},hasServerSidePagination:{defaultValue:null,description:"",name:"hasServerSidePagination",required:!0,type:{name:"boolean"}},defaultPageSize:{defaultValue:null,description:"",name:"defaultPageSize",required:!0,type:{name:"number"}},hasSorting:{defaultValue:null,description:"",name:"hasSorting",required:!0,type:{name:"boolean"}},hasServerSideSorting:{defaultValue:null,description:"",name:"hasServerSideSorting",required:!0,type:{name:"boolean"}},defaultSortBy:{defaultValue:null,description:"",name:"defaultSortBy",required:!0,type:{name:"SortingRule<D>[]"}},defaultHiddenColumns:{defaultValue:null,description:"",name:"defaultHiddenColumns",required:!0,type:{name:"IdType<D>[]"}},defaultColumnOrder:{defaultValue:null,description:"",name:"defaultColumnOrder",required:!0,type:{name:"IdType<D>[]"}},isCancelDisabled:{defaultValue:null,description:"",name:"isCancelDisabled",required:!0,type:{name:"boolean"}},pageButtonsCount:{defaultValue:null,description:"",name:"pageButtonsCount",required:!1,type:{name:"number"}}}}}catch{}export{w as T};
