import{j as t}from"./jsx-runtime-Cw0GR0a5.js";import{R as me,r as l}from"./index-CTjT7uj6.js";import{s as q,k as F,h as fe,i as ge,f as be,e as he,p as xe,ac as ye,S as E,R as Ce}from"./space-BY85GhUc.js";import{r as f}from"./index-DarwbsO9.js";import{c as Re}from"./index-C7IrpltL.js";import{g as we,H as Te,B as Se,L as je}from"./BaseTable.types-cuKXYoMJ.js";import{c as _,b as Ie,B as Be,a as De,S as Ee,C as ke}from"./BaseTable.styles-D9Tmu-Wz.js";import{F as ve}from"./Footer-ZYGRb8Ma.js";import{D as c}from"./Datatable.store-D58zn130.js";import{T as Le,L as Ne}from"./defaultConfigs-OxKkWKAU.js";import"./Surface-CvF-S7pg.js";import{P as Ae}from"./Padbox-CsIyVOa3.js";import{S as k}from"./Stack-vWwwEz_d.js";import"./Inline-CNottUT6.js";import"./Cluster-BOKWm1iB.js";import{a as Oe}from"./Text-CQej7zPl.js";import"./DSProvider-eD554_K8.js";import"./theme-DztFT9GZ.js";import"./index-DFvsTZbx.js";import{B as qe}from"./Button.enums-P6KVfN9D.js";import{B as Fe}from"./Button-CgUf0TwU.js";import{f as _e}from"./Heading-5wHX6smU.js";import{P as Pe}from"./Paragraph-DLn62-bA.js";import{s as He}from"./F-DymNqVSm.js";import{p as y}from"./prop-Cw0eZkJ_.js";import{i as ze}from"./isNonEmptyArray-CPhLVV4V.js";import{w as v}from"./when-DJfveLYW.js";import{p as Me}from"./pick-DB5feQ9Q.js";import{a as L}from"./isNonEmptyString-B_Cuyr9S.js";import{p as T}from"./propEq-CyrJNrjT.js";const u={deselectAllRows:"deselectAllRows",toggleSingleRowSelected:"toggleSingleRowSelected",cancelLoading:"cancelLoading",preserveState:"preserveState"},Ge=({collectFetchParams:o})=>(s,n)=>{const{pageSize:r,sortBy:i,previousState:d}=s;switch(n.type){case u.preserveState:return{...s,previousState:s};case u.cancelLoading:return d?{previousState:d,...d}:s;case"toggleSortBy":return setTimeout(()=>{o(0,r,i)},0),{...s,pageIndex:0};case u.deselectAllRows:return{...s,selectedRowIds:{}};case u.toggleSingleRowSelected:return{...s,selectedRowIds:{...n.id in s.selectedRowIds?{}:{[n.id]:!0}}}}return s},N=me.forwardRef(({id:o,indeterminate:s,isDisabled:n=!1,...r},i)=>{const d=l.useRef(),p=i||d;return l.useEffect(()=>{p.current.indeterminate=s},[p,s]),t.jsx(Le,{ref:p,checkboxId:o,isDisabled:n,isIndeterminate:s,name:r.title,type:"checkbox",...r})});function Ue(){return{id:_,sticky:"left",width:48,disableSortBy:!0,Header:({getToggleAllRowsSelectedProps:o,dataSize:s,isMultiSelect:n,dispatch:r,state:{selectedRowIds:i}})=>{if(s===0)return null;const d=Object.keys(i).length,p=d>0&&d<s;return t.jsx(N,{id:"header-select-all",...o({...n?{}:{onChange(){r({type:u.deselectAllRows})}}}),indeterminate:p,isDisabled:!n&&d===0})},cellType:Ie.selection,Cell:({isMultiSelect:o,row:s,dispatch:n})=>{const r=`row-${s.id}`;return t.jsx(N,{id:r,...s.getToggleRowSelectedProps({...o?{}:{onChange(i){n({type:u.toggleSingleRowSelected,id:s.id,value:i.target.checked})}}})})}}}const We=q.div.withConfig({displayName:"Table__NoDataOutline",componentId:"sc-1wjy85k-0"})(["border-top:1px solid ",";"],F("neutral.300")),A=q(Ae).withConfig({displayName:"Table__NoDataContainer",componentId:"sc-1wjy85k-1"})(["display:flex;flex-direction:column;background:",";padding:",";"],F("neutral.0"),fe(64)),O=(o,s,n)=>{c.update(r=>{r.pageIndex=o,r.pageSize=s,r.sortBy=n,r.isCanceled=!1})},Ve=o=>{c.update(s=>{s.selectedIds=Ce(o)})},$e=o=>t.jsx(ke,{...o});function P({columns:o,data:s,dataPrimaryKey:n,dataSize:r,isDataLoading:i,rowActions:d,NoMatchingDataComponent:p,NoDataComponent:H,hasSelection:z,isMultiSelect:M,defaultSelectedRows:G,hasPagination:U,hasServerSidePagination:b,isCancelDisabled:W,onCancelLoading:V,defaultPageSize:h,hasSorting:$,hasServerSideSorting:J,defaultSortBy:C,defaultPageIndex:R,defaultColumnOrder:Q,defaultHiddenColumns:X,pageButtonsCount:Y}){const g=l.useMemo(()=>b?r:s.length,[b,r,s]),Z=c.useState(e=>e.hasExclusiveSelection),K=c.useState(e=>e.hiddenColumns.length),ee=c.useState(e=>e.hasAppliedFilters),se=l.useMemo(()=>({minWidth:40,width:150,maxWidth:400,nullCondition:He,Cell:e=>$e(e),cellType:"text"}),[]),{getTableProps:te,getTableBodyProps:oe,headerGroups:re,page:ne,rows:ae,prepareRow:le,gotoPage:w,pageCount:S,dispatch:m,setColumnOrder:j,setHiddenColumns:I,state:{pageIndex:B,selectedRowIds:D,pageSize:ie,sortBy:ce}}=f.useTable({columns:o,data:s,defaultColumn:se,initialState:{pageSize:h,pageIndex:R,sortBy:C,selectedRowIds:G,columnOrder:Q,hiddenColumns:X},manualPagination:b,pageCount:Math.ceil(g/h),autoResetPage:!1,disableSortBy:!$,manualSortBy:J,autoResetSortBy:!1,autoResetSelectedRows:!1,...ge(n)&&{getRowId:be(n)?y(n):n},stateReducer:Ge({collectFetchParams:O}),rowActions:d,dataSize:g,isMultiSelect:M},f.useColumnOrder,f.useSortBy,f.usePagination,f.useRowSelect,f.useFlexLayout,e=>{e.visibleColumns.push(a=>[...z?[Ue()]:[],...a,...ze(d)?[we()]:[]])}),x=l.useCallback(()=>w(0),[w]),de=e=>{w(e),O(e,ie,ce)},ue=()=>{c.update(e=>{e.hiddenColumns=[]})};return l.useEffect(()=>{const e=c.subscribe(y("isCanceled"),a=>{a&&m({type:u.cancelLoading})});return()=>{e()}},[m]),l.useEffect(()=>{i||m({type:u.preserveState})},[m,i]),l.useEffect(()=>{const e=c.createReaction(a=>a.shouldResetSelectedRows,(a,pe)=>{a&&(m({type:u.deselectAllRows}),pe.shouldResetSelectedRows=!1)});return()=>{e()}},[m]),l.useEffect(()=>{const e=c.subscribe(a=>a.columnOrder,a=>{j(a)});return()=>{e()}},[j]),l.useEffect(()=>{const e=c.subscribe(a=>a.hiddenColumns,a=>{I(o.length===a.length?[...a,_]:a)});return()=>{e()}},[I,o.length]),l.useEffect(()=>{const e=c.subscribe(y("pageIndex"),v(he(0),x));return()=>{e()}},[x,B]),l.useEffect(()=>{const e=c.subscribe(Me(["filters","isCanceled"]),v(L([T("isCanceled",!1),xe(y("filters"),ye(L([T("isLoading",!0),T("isCanceled",!1)])))]),x));return()=>{e()}},[x]),l.useEffect(()=>{Ve(D)},[D]),l.useEffect(()=>{c.update(e=>{e.pageIndex=R,e.sortBy=C,e.pageSize=h})},[R,C,h]),t.jsxs(t.Fragment,{children:[t.jsxs(Be,{children:[t.jsx(De,{tabIndex:0,children:t.jsxs(Ee,{className:Re({"has-exclusive-selection":Z}),...te(),children:[t.jsx(Te,{headerGroups:re}),t.jsx(Se,{prepareRow:le,rows:b?ae:ne,...oe()})]})}),g>0&&i&&t.jsx(Ne,{isCancelable:!W,onCancel:V})]}),K===o.length&&t.jsx(We,{children:t.jsx(A,{children:t.jsxs(k,{gap:E.sm,justify:"flex-start",children:[t.jsxs(k,{gap:E.md,children:[t.jsxs(_e,{children:[r," ",r===1?"items":"item"," found"]}),t.jsx(Pe,{size:Oe.md,children:"But all columns are hidden at the moment."})]}),t.jsx(Fe,{variant:qe.text,onClick:ue,children:"Show Default Columns"})]})})}),g===0?t.jsx(A,{children:i?t.jsx(je,{}):ee?t.jsx(p,{}):t.jsx(H,{})}):S!==1?t.jsx(ve,{hasPagination:U&&g>0,isDataLoading:i,pageButtonsCount:Y,pageCount:S,pageIndex:B,onGotoPage:de}):null]})}P.displayName="Table";P.__docgenInfo={description:"",methods:[],displayName:"Table",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"D"}],raw:"D[]"},description:""},columns:{required:!0,tsType:{name:"Array",elements:[{name:"Column",elements:[{name:"D"}],raw:"Column<D>"}],raw:"Column<D>[]"},description:""},dataSize:{required:!0,tsType:{name:"number"},description:""},isDataLoading:{required:!0,tsType:{name:"boolean"},description:""},onCancelLoading:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},dataPrimaryKey:{required:!1,tsType:{name:"union",raw:`| string
| ((originalRow: D, relativeIndex: number, parent?: Row<D>) => string)`,elements:[{name:"string"},{name:"unknown"}]},description:""},defaultSelectedRows:{required:!1,tsType:{name:"Record",elements:[{name:"IdType",elements:[{name:"D"}],raw:"IdType<D>"},{name:"boolean"}],raw:"Record<IdType<D>, boolean>"},description:""},defaultPageIndex:{required:!0,tsType:{name:"number"},description:""},pageButtonsCount:{required:!1,tsType:{name:"number"},description:""}},composes:["Omit"]};export{P as T};
