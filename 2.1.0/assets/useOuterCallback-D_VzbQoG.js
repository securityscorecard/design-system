import{r as t}from"./index-BwDkhjyp.js";import{r as A}from"./index-DhoXBIRq.js";var b=function(r){var n=t.useRef(r);return n.current=r,n},P=function(r,n){n===void 0&&(n=100);var e=setTimeout(function(){clearTimeout(e),r()},n)},I=function(r){return Array.isArray(r)?r.every(function(n){return!Array.from(document.getElementsByClassName(n)).length}):r},x=function(n){var e=document.createElement("div");return e.setAttribute("id",n),document.body.appendChild(e),e},K=function(r,n,e,i,c){return function(u){var C=u.children,s=t.useState(),o=s[0],w=s[1];return t.useEffect(function(){return e?(w(document.getElementById(r)||x(r)),function(){o&&P(function(){n&&o.innerHTML===""&&o.remove()})}):function(){return null}},[o]),t.useEffect(function(){if(!e||!o)return function(){return null};var d=!1,l=function(f){d=!o.contains(f.target)},E=function(f){d&&i(f)},v=function(f){f.key==="Escape"&&c(f)};return i&&(document.addEventListener("mousedown",l),document.addEventListener("click",E)),c&&document.addEventListener("keydown",v),function(){i&&(document.removeEventListener("mousedown",l),document.removeEventListener("click",E)),c&&document.removeEventListener("keydown",v)}},[o]),e&&o?A.createPortal(C,o):null}},M="react-cool-portal",j=function(n){var e=n===void 0?{}:n,i=e.containerId,c=i===void 0?M:i,u=e.autoRemoveContainer,C=u===void 0?!0:u,s=e.defaultShow,o=s===void 0?!0:s,w=e.clickOutsideToHide,d=w===void 0?!0:w,l=e.escToHide,E=l===void 0?!0:l,v=e.internalShowHide,m=v===void 0?!0:v,f=e.onShow,$=e.onHide,T=t.useState(o),S=T[0],g=T[1],H=t.useRef(!1),p=b(f),R=b($),k=t.useRef(o),y=t.useCallback(function(){d&&(H.current=!0,P(function(){H.current=!1}))},[d]),L=t.useCallback(function(a){y(),!k.current&&(g(!0),k.current=!0,p.current&&p.current(a))},[p,y]),h=t.useCallback(function(a){y(),k.current&&(g(!1),k.current=!1,R.current&&R.current(a))},[R,y]),D=t.useCallback(function(a){k.current?h(a):L(a)},[h,L]),_=t.useCallback(function(a){H.current||(a.type==="click"&&I(d)||a.type==="keydown"&&I(E))&&h(a)},[h]),O=t.useCallback(K(c,C,!m||S,_,_),[m,S]);return{Portal:O,isShow:S,show:L,hide:h,toggle:D}};const q=r=>{const n=t.useRef(null),e=t.useRef(null);return t.useEffect(()=>{e.current=r}),t.useEffect(()=>{const i=u=>{n.current&&e.current&&!n.current.contains(u.target)&&document.body.contains(u.target)&&e.current(u)},c=u=>{u.key==="Escape"&&i(u)};return document.addEventListener("keydown",c),document.addEventListener("click",i),()=>{document.removeEventListener("keydown",c),document.removeEventListener("click",i)}},[]),n};export{q as a,j as u};
