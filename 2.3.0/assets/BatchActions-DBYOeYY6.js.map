{"version":3,"file":"BatchActions-DBYOeYY6.js","sources":["../../../src/components/Datatable/types/Action.types.ts","../../../src/components/Datatable/BatchModule/BatchActions/BatchActions.tsx"],"sourcesContent":["import PropTypes from 'prop-types';\n\nimport {\n  AbsoluteLinkActionKindPropType,\n  ActionKinds,\n  ActionWithSubactions,\n  ActionWithSubactionsPropType,\n  HandlerActionKindPropType,\n  RelativeLinkActionKindPropType,\n} from '../../../types/action.types';\n\nexport type Action<\n  OnClickArgs extends Array<unknown>,\n  OnClickReturnType = void,\n> =\n  | ActionKinds<OnClickArgs, OnClickReturnType>\n  | ActionWithSubactions<OnClickArgs, OnClickReturnType>;\n\nexport const ActionPropType = PropTypes.oneOfType([\n  HandlerActionKindPropType,\n  RelativeLinkActionKindPropType,\n  AbsoluteLinkActionKindPropType,\n  ActionWithSubactionsPropType,\n]);\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { map, pipe } from 'ramda';\nimport { isNotUndefined } from 'ramda-adjunct';\n\nimport { SpaceSizes } from '../../../../theme';\nimport { SSCIconNames } from '../../../../theme/icons/icons.enums';\nimport { getFormStyle, pxToRem } from '../../../../utils';\nimport { Inline } from '../../../layout';\nimport { BaseButton } from '../../../_internal/BaseButton';\nimport { ButtonVariants } from '../../../Button/Button.enums';\nimport { Icon } from '../../../Icon';\nimport { ActionPropType } from '../../types/Action.types';\nimport {\n  AbsoluteLinkActionKind,\n  ActionWithSubactions,\n  RelativeLinkActionKind,\n} from '../../../../types/action.types';\nimport { DropdownMenu } from '../../../_internal/BaseDropdownMenu';\nimport { BatchActionsProps } from './BatchActions.types';\nimport { DatatableStore } from '../../Datatable.store';\nimport { BatchActionArgs } from '../../Datatable.types';\nimport { Tooltip } from '../../../Tooltip';\n\nconst BatchActionButton = styled(BaseButton)`\n  padding: ${pxToRem(9.5, 16)};\n  line-height: ${pxToRem(13)};\n  height: ${pipe(getFormStyle('fieldHeight'), pxToRem)};\n`;\n\nconst BatchActions = ({ actions }: BatchActionsProps) => {\n  const { selectedIds, hasExclusiveSelection } = DatatableStore.useState(\n    (s) => ({\n      selectedIds: s.selectedIds,\n      hasExclusiveSelection: s.hasExclusiveSelection,\n    }),\n  );\n\n  const handleResetSelection = () => {\n    DatatableStore.update((s) => {\n      s.shouldResetSelectedRows = true;\n    });\n  };\n\n  const handleOnActionClick = useCallback(\n    (onClick) => {\n      onClick(selectedIds, hasExclusiveSelection, handleResetSelection);\n    },\n    [selectedIds, hasExclusiveSelection],\n  );\n\n  return (\n    <Inline>\n      {actions.map((action) => {\n        let element;\n        if (\n          isNotUndefined(\n            (action as ActionWithSubactions<BatchActionArgs>).subActions,\n          )\n        ) {\n          const subActions = map(\n            (subAction) => ({\n              ...subAction,\n              onClick: () => handleOnActionClick(subAction.onClick),\n            }),\n            (action as ActionWithSubactions<BatchActionArgs>).subActions,\n          );\n\n          element = (\n            <DropdownMenu\n              key={action.name}\n              actions={subActions}\n              paneWidth={140}\n              placement=\"bottom-end\"\n            >\n              <BatchActionButton\n                name={action.name}\n                variant={ButtonVariants.text}\n                onClick={action.onClick}\n              >\n                <Inline align=\"center\" gap={SpaceSizes.xs}>\n                  <span>{action.label}</span>\n                  <Icon margin={{ left: 0.25 }} name={SSCIconNames.angleDown} />\n                </Inline>\n              </BatchActionButton>\n            </DropdownMenu>\n          );\n        } else {\n          element = (\n            <BatchActionButton\n              key={action.name}\n              href={(action as AbsoluteLinkActionKind<BatchActionArgs>).href}\n              name={action.name}\n              to={(action as RelativeLinkActionKind<BatchActionArgs>).to}\n              variant={ButtonVariants.text}\n              onClick={() => handleOnActionClick(action.onClick)}\n            >\n              {action.label}\n            </BatchActionButton>\n          );\n        }\n\n        return (\n          <Tooltip key={action.name} popup={action.tooltip}>\n            {element}\n          </Tooltip>\n        );\n      })}\n    </Inline>\n  );\n};\n\nBatchActions.propTypes = {\n  actions: PropTypes.arrayOf(ActionPropType).isRequired,\n};\n\nexport default BatchActions;\n"],"names":["ActionPropType","PropTypes","oneOfType","HandlerActionKindPropType","RelativeLinkActionKindPropType","AbsoluteLinkActionKindPropType","ActionWithSubactionsPropType","cov_22n1i5vjah","path","hash","global","gcv","coverageData","coverage","actualCoverage","BatchActionButton","s","styled","BaseButton","withConfig","displayName","componentId","pxToRem","pipe","getFormStyle","BatchActions","actions","f","DatatableStore","hasExclusiveSelection","handleResetSelection","update","shouldResetSelectedRows","handleOnActionClick","useCallback","onClick","selectedIds","jsx","Inline","children","map","action","element","isNotUndefined","subActions","b","subAction"],"mappings":"qvBAkBaA,MAAAA,EAAiBC,EAAUC,UAAU,CAChDC,EACAC,EACAC,EACAC,CAA4B,CAC7B,ECQD,SAAAC,GAAA,CAAA,IAAAC,EAAA,mHAAAC,EAAA,2CAAAC,EAAA,OAAAC,EAAA,eAAAC,EAAA,CAAA,KAAA,mHAAA,aAAA,CAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,GAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,GAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,GAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,GAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,GAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,GAAA,CAAA,CAAA,EAAA,MAAA,CAAA,EAAA,CAAA,KAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,EAAA,CAAA,KAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,EAAA,CAAA,KAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,EAAA,CAAA,KAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,EAAA,CAAA,KAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,EAAA,CAAA,KAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,EAAA,CAAA,KAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA,EAAA,CAAA,KAAA,gBAAA,KAAA,CAAA,MAAA,CAAA,KAAA,GAAA,OAAA,EAAA,EAAA,IAAA,CAAA,KAAA,GAAA,OAAA,EAAA,CAA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"}