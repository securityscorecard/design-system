import{j as A}from"./jsx-runtime-Nms4Y4qS.js";import{r as e}from"./index-BwDkhjyp.js";import{a as t}from"./chunk-454WOBUV-DWuJqIWT.js";import{M as z,a as c}from"./ipAssets-CqV9nhfR.js";import{s as B}from"./columns-CefsLJWo.js";import{c as N}from"./docs-CvwVg-te.js";import{f as E}from"./options-N0W16A-D.js";import{b as x,d as V}from"./actions-BA0s72gd.js";import{a as _,d as j}from"./defaultConfigs-CYXVcUUk.js";import{D as T}from"./Datatable-IFzEAESU.js";import{M}from"./react-router-dom-gpQgZfeg.js";import"./_commonjsHelpers-BosuxZz1.js";import"./v4-D8aEg3BZ.js";import"./Text-C1sA-5dj.js";import"./space-B9R18Mwn.js";import"./index-Dk74W0Oi.js";import"./index-CVyJwDg7.js";import"./Tooltip-BAcCN_rY.js";import"./DSProvider-DzIDhM_J.js";import"./extends-CF3RwP-h.js";import"./index-DhoXBIRq.js";import"./theme-BW2FcxSF.js";import"./colors-DAn332pn.js";import"./Surface-Cs7tekjF.js";import"./flex.types-q2tZp175.js";import"./useLogger-D4I9buOf.js";import"./prop-3Huj0iT1.js";import"./Padbox-BrtZqAZY.js";import"./Stack-B_iJg7G-.js";import"./Inline-Cavohj9s.js";import"./Cluster-f2eLrBJy.js";import"./FloatingContext-nGTlWJDF.js";import"./toPairs-37tGaowo.js";import"./Filters-D8LQoemD.js";import"./Icon-B7DxM8PH.js";import"./index-DFvsTZbx.js";import"./Spinner-DLDOSOzx.js";import"./Message-C3lQWFI8.js";import"./Paragraph-DD2XWiUD.js";import"./spacing.types-QRY9P8Qv.js";import"./Checkbox-BglAPnik.js";import"./check-DkA7BUy7.js";import"./minus-DR9WSvoQ.js";import"./Label-B8OlZEa3.js";import"./Input-CwSx1PX_.js";import"./MultiValueInput-C6fEM2Nq.js";import"./index-BFi_qJcR.js";import"./Pill-CwiyUbuD.js";import"./PillRemoveButton-MEfwPxhp.js";import"./PillLabel-DJNPzf-i.js";import"./gt-CQw4D1xu.js";import"./isNonEmptyArray-WRg_f07P.js";import"./isNotEmpty-DVMo52u6.js";import"./isArray-C7-fa-V4.js";import"./isFunction-Wst0ouRg.js";import"./pluck-CCxX0LJC.js";import"./both-CuwR4I11.js";import"./isEmptyArray-B-_3gajU.js";import"./noop-Bk6XfTLC.js";import"./isNonEmptyString-Dt8hjEzN.js";import"./isNotNull-C0-yEnlk.js";import"./trim-C3a3l8W7.js";import"./take-B9V3Rq9C.js";import"./Password-D7QM-IUi.js";import"./Radio-DFCni97p.js";import"./Select-CtVnGavB.js";import"./unsupportedIterableToArray-CO_C7xo5.js";import"./setPrototypeOf-DgZC2w_0.js";import"./action.types-BWYzzYyM.js";import"./Button.enums-b_k9EAqq.js";import"./BaseButton-IeCCn510.js";import"./require-router-link-m162i5rV.js";import"./Button-CKE-X77u.js";import"./pick-C_tN_oBI.js";import"./isNotNilOrEmpty-Drr4-pBH.js";import"./isNilOrEmpty-CUDYV7wl.js";import"./isNil-Bk-kOnIJ.js";import"./sortBy-C0xwtuk4.js";import"./CreatableSelect-CN0MEXJF.js";import"./Range-Bir4y49t.js";import"./Switch-D9B5JuGJ.js";import"./subtract-Cjqc-chC.js";import"./TextArea-COoMwukw.js";import"./mergeRefs-CX7C4EOn.js";import"./SearchBar-Bv5RW7j4.js";import"./SegmentedToggleItem-DDZuede1.js";import"./BaseTabLabel-CtrAa1KX.js";import"./InputGroup-DECcveUb.js";import"./BaseDateRangePicker-Dv9RK7Av.js";import"./SingleDatePicker-Yzq5xvuy.js";import"./isNativeReflectConstruct-lfp1ZYuW.js";import"./usePopper-CU1jfDfa.js";import"./propEq-OPocqzy6.js";import"./head-BK3sXUYn.js";import"./defaultTo-DsXJggfG.js";import"./BottomBar-yumW99eA.js";import"./all-C7zVCIcz.js";import"./when-Deeh8967.js";import"./Heading-Doa2oxzU.js";import"./BaseTable.types-CWT_QYS5.js";import"./BaseTable.styles-2ZZNyzZ6.js";import"./BaseLink-BTj3sWKL.js";import"./flip-BqWK4A3v.js";import"./DropdownMenu-BTsEoeHW.js";import"./Dropdown-1JeK-t7e.js";import"./ControlledDropdown-Dz2bix8N.js";import"./useOuterCallback-D_VzbQoG.js";import"./inheritsLoose-B6jfs0L0.js";import"./DropdownMenu.types-B7-2fpHE.js";import"./ellipsisH-CxP8BjCT.js";import"./Footer-Ds-g7pmw.js";import"./Datatable.store-C2OZ8Th5.js";import"./BatchActions-BB52bNjJ.js";import"./ControlsModule-CG42mTjK.js";import"./ColumnsControls-BtM2CNi9.js";import"./ControlDropdown-B1Y3BnKg.js";import"./CloseButton-CuyKiBXp.js";import"./SortableList-cioTTupr.js";import"./sortable.esm-DD_xGjRI.js";import"./modifiers.esm-CDknwSvc.js";import"./lt-8WxB2gIi.js";import"./ControlButton-BBMhxOrx.js";import"./Badge-DyqwJJ00.js";import"./omit-SByFF4Xo.js";import"./zipObj-D5WCOpKt.js";import"./BatchModule-8K1UrGFj.js";import"./ElementCounter-BYwZU7Ab.js";import"./Table-tspPzy86.js";import"./index-BjrugAYY.js";import"./F-DymNqVSm.js";import"./useColumnsControls-9tPA0_jS.js";import"./useLocalStorageState-CgPcEN2x.js";import"./tiny-invariant-CopsF_GD.js";const J={fields:E,onApply:t("onFiltersApply"),onChange:t("onFiltersChange"),onClose:t("onFiltersClose")},D={filteringConfig:J,searchConfig:{onSearch:t("onSearch"),onClear:t("onClear")},onColumnVisibilityChange:t("columnVisibilityChange")},q=`{
  Header: string;
  cellType?: CellTypes;
  cellLinkComponent?: ReactComponentLike;
  cellOnClick?: (value: CellValue, rowData: D) => void;
  cellHrefComposer?: (value: CellValue, rowData: D) => string;
  cellToComposer?: (value: CellValue, rowData: D) => To;
  cellFormatter?: (value: CellValue, rowData: D) => string;
  cellTooltipPopupComposer?: (value: CellValue, rowData: D) => JSX.Element;
  nullCondition?: (value: CellValue) => boolean;
  nullConditionValue?: string;
  multiValueDisplayLimit?: number;
  headerTooltip?: JSX.Element;

  ...rest of Column options from 'react-table'
}`,H=`| string
| (originalRow: D, relativeIndex: number, parent?: Row<D>) => string`,X=`| HandlerActionKind
| AbsoluteLinkActionKind
| RelativeLinkActionKind
| ActionWithSubactions
`,W=`{
  hasSelection: boolean;
  onSelect: (
    ids: IdType<D>[],
    hasExclusiveSelection: boolean,
  ) => void;
  defaultSelectedRowIds: IdType<D>[];
  hasPagination: boolean;
  hasServerSidePagination: boolean;
  defaultPageSize: number;
  hasSorting: boolean;
  hasServerSideSorting: boolean;
  defaultSortBy: {
    id: IdType<D>;
    desc?: boolean;
  }[];
  rowActions: RowAction<D>[];
  NoMatchingDataComponent: ReactComponentLike;
  NoDataComponent: ReactComponentLike;
}`,Z=`{
  hasSearch: boolean;
  searchConfig: Partial<SearchBarProps>;
  hasFiltering: boolean;
  filteringConfig: Partial<FiltersProps>;
  defaultIsFilteringOpen: boolean;
  defaultIsFilteringApplied: boolean;
  onControlToggle: (control: Controls, isActive: boolean) => void;
}`,$=`({
  pageSize: number;
  pageIndex: number;
  sortBy: SortingRule<D>[];
  filters: Filter[];
  query: string;
}) => void;`;z.set("2021-03-31T00:00:00Z");const Ae={title:"components/Datatable",component:T,parameters:{screenshot:{skip:!0},docs:{source:{type:"code"},description:{component:`
\`\`\`jsx
import { Datatable } from '@securityscorecard/design-system';

const MyFancyDatatable = () => <Datatable ...props />
\`\`\`

  ${N}
      `}}},decorators:[s=>A.jsx(M,{children:s()})],argTypes:{data:{control:{disable:!0}},dataSize:{control:{disable:!0}},columns:{control:{disable:!0},table:{type:{summary:"Columns<D>[]",detail:q}}},isDataLoading:{control:{disable:!0}},pageButtonsCount:{control:{disable:!1},defaultValue:5},dataPrimaryKey:{table:{type:{summary:"PrimaryKey<D>",detail:H}}},batchActions:{table:{type:{summary:"Action[]",detail:X}}},controlsConfig:{table:{type:{summary:"Partial<ControlsConfig>",detail:Z},defaultValue:{summary:"defaultControlsConfig",detail:JSON.stringify(_,null,2)}}},tableConfig:{table:{type:{summary:"Partial<TableConfig<D>>",detail:W},defaultValue:{summary:"defaultTableConfig",detail:JSON.stringify(j,null,2)}}},onDataFetch:{control:{disable:!0},table:{type:{summary:"OnDataFetchFn<D>",detail:$},defaultValue:{summary:"noop"}}}}},r=s=>{const[m,l]=e.useState([]),[g,a]=e.useState(!0),[u,f]=e.useState(0),p=e.useRef(),n=e.useCallback(({pageSize:S,pageIndex:P})=>{t("onDataFetch")({pageSize:S,pageIndex:P}),a(!0),p.current=setTimeout(()=>{const w=S*P,O=w+S,k=c.slice(w,O);l(k),f(c.length),a(!1)},500)},[a,l]);e.useEffect(()=>{n({pageSize:50,pageIndex:0})},[n]);const{batchActions:C=[],controlsConfig:d={},dataPrimaryKey:h,tableConfig:o={},...y}=s,b=()=>{clearTimeout(p.current),a(!1)};return A.jsx(T,{...y,batchActions:[...C,...x],columns:B,controlsConfig:{...d,...D},data:m,dataPrimaryKey:h||"ipAddress",dataSize:u,isDataLoading:g,tableConfig:{...o,rowActions:[...(o==null?void 0:o.rowActions)||[],...V],onSelect:t("onRowSelect")},onCancelLoading:b,onDataFetch:n})};r.storyName="Playground (Server-Side implementation)";const i=s=>{const[m,l]=e.useState(c),g=e.useRef(null),a=o=>{g.current=o},u=o=>{t("onSearch")(o);const y=c.filter(b=>b.ipAddress.includes(o));l(y)},f=()=>{t("onClear")(),l(c)},{batchActions:p=[],controlsConfig:n={},dataPrimaryKey:C,tableConfig:d={},...h}=s;return A.jsx(T,{...h,batchActions:[...p,...x],columns:B,controlsConfig:{...D,...n,searchConfig:{...D.searchConfig,...n.searchConfig,onSearch:u,onClear:f}},data:m,dataPrimaryKey:C||"ipAddress",dataSize:m.length,resetSelectionFn:a,tableConfig:{...d,rowActions:[...d.rowActions||[],...V],onSelect:t("onRowSelect"),hasServerSidePagination:!1,hasServerSideSorting:!1}})};i.storyName="Playground (In-Browser implementation)";r.__docgenInfo={description:"",methods:[],displayName:"ServerSidePlayground"};i.__docgenInfo={description:"",methods:[],displayName:"InBrowserPlayground"};var R,F,L;r.parameters={...r.parameters,docs:{...(R=r.parameters)==null?void 0:R.docs,source:{originalSource:`args => {
  const [tableData, setTableData] = useState<Data[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [totalLength, setTotalLength] = useState(0);
  const timeoutRef = useRef<NodeJS.Timeout | undefined>();
  const dispatchFetchData = useCallback(({
    pageSize,
    pageIndex
  }) => {
    action('onDataFetch')({
      pageSize,
      pageIndex
    });
    setIsLoading(true);
    timeoutRef.current = setTimeout(() => {
      const startRow = pageSize * pageIndex;
      const endRow = startRow + pageSize;
      const fetchedData: Data[] = assets.slice(startRow, endRow);
      setTableData(fetchedData);
      setTotalLength(assets.length);
      setIsLoading(false);
    }, 500);
  }, [setIsLoading, setTableData]);
  useEffect(() => {
    dispatchFetchData({
      pageSize: 50,
      pageIndex: 0
    });
  }, [dispatchFetchData]);
  const {
    batchActions: argsBatchActions = [],
    controlsConfig: argsControlsConfig = {},
    dataPrimaryKey: argsDataPrimaryKey,
    tableConfig: argsTableConfig = {},
    ...restArgs
  } = args;
  const onCancelLoading = () => {
    clearTimeout(timeoutRef.current);
    setIsLoading(false);
  };
  return <Datatable<Data> {...restArgs} batchActions={[...argsBatchActions, ...datatableBatchActions]} columns={simpleColumns} controlsConfig={{
    ...argsControlsConfig,
    ...controlsConfig
  }} data={tableData} dataPrimaryKey={argsDataPrimaryKey || 'ipAddress'} dataSize={totalLength} isDataLoading={isLoading} tableConfig={{
    ...argsTableConfig,
    rowActions: [...(argsTableConfig?.rowActions || []), ...datatableRowActions],
    onSelect: action('onRowSelect')
  }} onCancelLoading={onCancelLoading} onDataFetch={dispatchFetchData} />;
}`,...(L=(F=r.parameters)==null?void 0:F.docs)==null?void 0:L.source}}};var v,I,K;i.parameters={...i.parameters,docs:{...(v=i.parameters)==null?void 0:v.docs,source:{originalSource:`args => {
  const [data, setData] = useState(assets);
  const resetFilter = useRef(null);
  const storeResetFn = resetFn => {
    resetFilter.current = resetFn;
  };
  const handleOnSearch = query => {
    action('onSearch')(query);
    const result = assets.filter(asset => asset.ipAddress.includes(query));
    setData(result);
  };
  const handleOnClearSearch = () => {
    action('onClear')();
    setData(assets);
  };
  const {
    batchActions: argsBatchActions = [],
    controlsConfig: argsControlsConfig = {},
    dataPrimaryKey: argsDataPrimaryKey,
    tableConfig: argsTableConfig = {},
    ...restArgs
  } = args;
  return <Datatable<Data> {...restArgs} batchActions={[...argsBatchActions, ...datatableBatchActions]} columns={simpleColumns} controlsConfig={{
    ...controlsConfig,
    ...argsControlsConfig,
    searchConfig: {
      ...controlsConfig.searchConfig,
      ...argsControlsConfig.searchConfig,
      onSearch: handleOnSearch,
      onClear: handleOnClearSearch
    }
  }} data={data} dataPrimaryKey={argsDataPrimaryKey || 'ipAddress'} dataSize={data.length} resetSelectionFn={storeResetFn} tableConfig={{
    ...argsTableConfig,
    rowActions: [...(argsTableConfig.rowActions || []), ...datatableRowActions],
    onSelect: action('onRowSelect'),
    hasServerSidePagination: false,
    hasServerSideSorting: false
  }} />;
}`,...(K=(I=i.parameters)==null?void 0:I.docs)==null?void 0:K.source}}};const Te=["ServerSidePlayground","InBrowserPlayground"];export{i as InBrowserPlayground,r as ServerSidePlayground,Te as __namedExportsOrder,Ae as default};
