{"version":3,"file":"DatatableTests.stories-CFZ-4ADm.js","sources":["../../../src/components/Datatable/DatatableTests.stories.tsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { Meta, StoryFn } from '@storybook/react';\nimport { MemoryRouter } from 'react-router-dom';\n\nimport Datatable from './Datatable';\nimport {\n  fields as filtersFields,\n  state as filtersState,\n} from '../Filters/mocks/options';\nimport { Data } from '../_internal/BaseTable/mocks/types';\nimport assets from '../_internal/BaseTable/mocks/ipAssets.json';\nimport { simpleColumns } from '../_internal/BaseTable/mocks/columns';\nimport { DatatableProps } from './Datatable.types';\nimport { DatatableStore, datatableInitialState } from './Datatable.store';\nimport { tableActionsMock } from './mocks/actions';\nimport { Text } from '../Text';\nimport { Stack } from '../layout';\n\nexport default {\n  title: 'tests/Datatable/Datatable',\n  component: Datatable,\n  parameters: {\n    viewMode: 'story',\n    docs: { disable: true },\n    previewTabs: { 'storybook/docs/panel': { hidden: true } },\n    mockDate: new Date('2021-03-31T00:00:00Z'),\n  },\n  decorators: [(storyFn) => <MemoryRouter>{storyFn()}</MemoryRouter>],\n} as Meta;\n\nconst DatatableTemplate: StoryFn<DatatableProps<Data>> = (args) => (\n  <Datatable<Data> {...args} />\n);\n\nexport const MinimalConfig = DatatableTemplate.bind({});\nMinimalConfig.args = {\n  data: assets.slice(0, 5),\n  columns: simpleColumns,\n  dataSize: assets.length,\n  controlsConfig: {\n    filteringConfig: {\n      fields: filtersFields,\n    },\n  },\n};\n\nexport const WithDisabledSelection = DatatableTemplate.bind({});\nWithDisabledSelection.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    hasSelection: false,\n  },\n};\n\nexport const WithSelectedRows = DatatableTemplate.bind({});\nWithSelectedRows.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    defaultSelectedRowIds: [1, 3],\n  },\n};\n\nexport const WithSelectedRowsAndExclusionLogic = DatatableTemplate.bind({});\nWithSelectedRowsAndExclusionLogic.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    defaultSelectedRowIds: [1, 3],\n    hasOnlyPerPageSelection: false,\n  },\n};\n\nexport const WithSingleSelection = DatatableTemplate.bind({});\nWithSingleSelection.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    isMultiSelect: false,\n  },\n};\n\nexport const WithSingleSelectionAndSelectedRow = DatatableTemplate.bind({});\nWithSingleSelectionAndSelectedRow.args = {\n  ...MinimalConfig.args,\n  tableConfig: {\n    isMultiSelect: false,\n    defaultSelectedRowIds: [1],\n  },\n};\n\nexport const WithNoData = DatatableTemplate.bind({});\nWithNoData.args = {\n  ...MinimalConfig.args,\n  data: [],\n  dataSize: 0,\n};\n\nexport const WithNoMatchingData: StoryFn<DatatableProps<Data>> = (args) => {\n  useEffect(() => {\n    DatatableStore.update((s) => {\n      s.hasAppliedFilters = true;\n    });\n\n    return () => {\n      DatatableStore.replace(datatableInitialState);\n    };\n  });\n\n  return <Datatable<Data> {...args} />;\n};\nWithNoMatchingData.args = {\n  ...WithNoData.args,\n  controlsConfig: {\n    ...WithNoData.args.controlsConfig,\n    defaultIsFilteringApplied: true,\n  },\n};\n\nexport const WithBatchActions = DatatableTemplate.bind({});\nWithBatchActions.args = {\n  ...MinimalConfig.args,\n  batchActions: tableActionsMock,\n};\n\nexport const WithDisabledBatchModule = DatatableTemplate.bind({});\nWithDisabledBatchModule.args = {\n  ...MinimalConfig.args,\n  isBatchModuleEnabled: false,\n};\n\nexport const WithDisabledControls = DatatableTemplate.bind({});\nWithDisabledControls.args = {\n  ...MinimalConfig.args,\n  isControlsEnabled: false,\n};\n\nexport const WithDisabledControlsAndActiveColumns = DatatableTemplate.bind({});\nWithDisabledControlsAndActiveColumns.args = {\n  ...MinimalConfig.args,\n  isControlsEnabled: false,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsOpen: true,\n  },\n};\n\nexport const WithDisabledControlsAndAppliedColumns = DatatableTemplate.bind({});\nWithDisabledControlsAndAppliedColumns.args = {\n  ...MinimalConfig.args,\n  isControlsEnabled: false,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsApplied: true,\n  },\n};\n\nexport const WithDisabledControlsAndColumns = DatatableTemplate.bind({});\nWithDisabledControlsAndColumns.args = {\n  ...MinimalConfig.args,\n  isControlsEnabled: false,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    hasColumnsControls: false,\n  },\n};\n\nexport const WithOpenFiltering = DatatableTemplate.bind({});\nWithOpenFiltering.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsFilteringOpen: true,\n  },\n};\n\nexport const WithAppliedFiltering = DatatableTemplate.bind({});\nWithAppliedFiltering.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsFilteringApplied: true,\n  },\n};\n\nexport const WithOpenAndAppliedFiltering = DatatableTemplate.bind({});\nWithOpenAndAppliedFiltering.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    defaultIsFilteringOpen: true,\n    filteringConfig: {\n      fields: filtersFields,\n      state: filtersState,\n    },\n  },\n};\n\nexport const WithDisabledFiltering = DatatableTemplate.bind({});\nWithDisabledFiltering.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    hasFiltering: false,\n  },\n};\n\nexport const WithOpenColumns = DatatableTemplate.bind({});\nWithOpenColumns.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsOpen: true,\n  },\n};\nWithOpenColumns.parameters = {\n  screenshot: {\n    delay: 1000,\n  },\n};\n\nexport const WithAppliedColumns = DatatableTemplate.bind({});\nWithAppliedColumns.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsApplied: true,\n  },\n};\n\nexport const WithOpenAndAppliedColumns = DatatableTemplate.bind({});\nWithOpenAndAppliedColumns.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsOpen: true,\n    defaultIsColumnsControlsApplied: true,\n  },\n};\nWithOpenAndAppliedColumns.parameters = {\n  screenshot: {\n    delay: 1000,\n  },\n};\n\nexport const WithDisabledColumns = DatatableTemplate.bind({});\nWithDisabledColumns.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    hasColumnsControls: false,\n  },\n};\n\nexport const WithCustomPlaceholderForSearch = DatatableTemplate.bind({});\nWithCustomPlaceholderForSearch.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    searchConfig: {\n      placeholder: 'Search by IP address',\n    },\n  },\n};\n\nexport const WithDisabledSearch = DatatableTemplate.bind({});\nWithDisabledSearch.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    hasSearch: false,\n  },\n};\n\nexport const WithSinglePage = DatatableTemplate.bind({});\nWithSinglePage.args = {\n  ...MinimalConfig.args,\n  dataSize: 50,\n};\n\nexport const WithAllColumnsHidden = DatatableTemplate.bind({});\nWithAllColumnsHidden.args = {\n  ...MinimalConfig.args,\n  controlsConfig: {\n    ...MinimalConfig.args.controlsConfig,\n    defaultIsColumnsControlsApplied: true,\n  },\n  tableConfig: {\n    defaultHiddenColumns: [\n      'status',\n      'detectionMethod',\n      'country',\n      'findingsCount',\n      'ipAddress',\n      'domainsCount',\n      'source',\n      'issuesCount',\n      'observationDate',\n      'lastObservationDate',\n      'observedFor',\n    ],\n  },\n};\n\nexport const WithPersistedState = DatatableTemplate.bind({});\nWithPersistedState.args = {\n  ...MinimalConfig.args,\n  id: 'persisted_state',\n};\nWithPersistedState.parameters = {\n  screenshot: { skip: true },\n};\nWithPersistedState.decorators = [\n  (storyFn) => (\n    <Stack gap=\"md\">\n      <Text>\n        An id must be provided to the Datatable in order to persists the table\n        configuration.\n      </Text>\n      {storyFn()}\n    </Stack>\n  ),\n];\n"],"names":["docs","DatatableTests_stories","disable","Datatable","previewTabs","viewMode","hidden","mockDate","Date","decorators","storyFn","MemoryRouter","DatatableTemplate","jsx","MinimalConfig","bind","args","controlsConfig","filteringConfig","fields","assets","filtersFields","hasSelection","WithDisabledSelection","tableConfig","WithSelectedRows","defaultSelectedRowIds","WithSelectedRowsAndExclusionLogic","isMultiSelect","WithSingleSelectionAndSelectedRow","WithNoData","data","dataSize","useEffect","DatatableStore","WithNoMatchingData","update","s","replace","datatableInitialState","batchActions","tableActionsMock","isBatchModuleEnabled","defaultIsFilteringApplied","WithDisabledControls","isControlsEnabled","WithBatchActions","WithDisabledBatchModule","defaultIsColumnsControlsOpen","WithDisabledControlsAndActiveColumns","hasColumnsControls","WithDisabledControlsAndAppliedColumns","defaultIsFilteringOpen","WithDisabledControlsAndColumns","WithOpenAndAppliedFiltering","state","filtersState","WithAppliedFiltering","hasFiltering","WithOpenColumns","screenshot","delay","defaultIsColumnsControlsApplied","WithOpenAndAppliedColumns","parameters","WithCustomPlaceholderForSearch","searchConfig","placeholder","WithDisabledSearch","hasSearch","WithSinglePage","defaultHiddenColumns","WithPersistedState","skip"],"mappings":"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"}